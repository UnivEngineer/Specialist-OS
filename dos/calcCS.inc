;+---------------------------------------------------------------------------
; MXOS
; Расчет контрольной суммы
;
; На входе
;  hl - начальный адрес
;  de - конечный адрес
;
; На выходе
;  bc - контрольная сумма
;
; 2013-12-12 Дизассемблировано vinxru
;----------------------------------------------------------------------------

calcCS:     ld      bc, 0
calcCS_1:   ld      a, (hl)
            add     a, c
            ld      c, a
            push    af
            call    cmp_hl_de_2
            jp z,   calcCS_2
            pop     af
            ld      a, b
            ADC     a, (hl)
            ld      b, a
            inc     hl
            jp      calcCS_1
calcCS_2:   pop     af
            ret

