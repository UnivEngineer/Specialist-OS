;+---------------------------------------------------------------------------
; MXOS
; Расчет адреса курсора в видеопамяти. И перевод строки, если курсор был
; за правым краем экрана.
;
; На выходе
;  hl - координаты курсора
;  a * 256 + l - адрес в видеопамяти
;
; 2013-12-12 Дизассемблировано vinxru
;----------------------------------------------------------------------------

calcCursorAddr:   ; В hl положение курсора
            ld    hl, (bios_vars.cursorY)

            ; Если cursorX >= 190, то перевод строки (вывод кода 10)
            ; Иначе рассчитываем адрес старшего байта a = cursorX / 4 + 90h
            ld    a, h
            cp    190
            jp c, calcCursorAd_1
            ld    c, 10
            jp    calcCursorAd_0

