;+---------------------------------------------------------------------------
; MXOS
; Сранивать расширения файлов
;
; На входе
;  de - адрес расширения 1
;  v_curFileDescr - имя с расширением 2
;
; На выходе
;  zf=0 - расширения равны
;  de - de+3
;
; 2013-12-12 Дизассемблировано vinxru
;----------------------------------------------------------------------------

cmpFileExt:
            ; Адрес расширения
            ld      hl, v_curFileDescr + DIR_NAME_LENGTH
            ld      bc, 3   ; Сравниваем 3 символа
cmpFileExt_0:
            ld      a, (de)
            cp      (hl)
            jp nz,  cmpFileExt_1
            inc     hl
            inc     de
            dec     c
            jp nz,  cmpFileExt_0

            ; ZF=1 если равны

cmpFileExt_1:
            ; Делаем так, чтобы de на выходе функции был на 3 больше, 
            ; чем на входе в функцию
            push    af
            ex      de, hl
            add     hl, bc
            ex      de, hl
            pop     af

            ; Выход
            ret

