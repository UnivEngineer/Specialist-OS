# file opened: D:\Projects\Specialist\MySoft\MXOS-Z80\E\E.asm
   1  0000              ;----------------------------------------------------------------------------
   2  0000              ; MXOS
   3  0000              ; E.COM - текстовой редактор
   4  0000              ;
   5  0000              ; 2022-02-03 Дизассемблировано SpaceEngineer
   6  0000              ;----------------------------------------------------------------------------
   7  0000
   8  0000                  INCLUDE "../include/mxos.inc"
# file opened: D:\Projects\Specialist\MySoft\MXOS-Z80\E\../include/mxos.inc
   1+ 0000              ;-----------------------------------------------------------------------
   2+ 0000              ; MXOS
   3+ 0000              ; Точки входа и настройки сборки MXOS
   4+ 0000              ;
   5+ 0000              ; Карта памяти:
   6+ 0000              ;   8FDF-8FFF - [  32 B] Переменные
   7+ 0000              ;   9000-BFFF - [12  KB] Экран
   8+ 0000              ;   C000-CFFF - [4096 B] DOS.SYS (в конце чуть чуть свободного места под доработки)
   9+ 0000              ;   D000-E1FF - [4607 B] NC.COM (в конце место под список файлов и чуть чуть свободного места под доработки)
  10+ 0000              ;   E200-E5FF - [1024 B] (свободно 1024 байт)
  11+ 0000              ;   E600-E7FF - [ 512 B] Драйвер магнитофона
  12+ 0000              ;   E900-F0FF - [2048 B] Шрифт (можно отключить запуском ROMFNT.COM или опцией LOAD_FONT=0)
  13+ 0000              ;   F100-F8FF - [2048 B] FORMAT.COM, FPAGE.COM, MON2.COM и прочие утилиты
  14+ 0000              ;   F900-F9FF - [ 256 B] (Свободно 256 байт)
  15+ 0000              ;   FA00-FAFF - [ 256 B] Драйвер флеш-диска
  16+ 0000              ;   FB00-FEFF - [1024 B] Дисковый буфер
  17+ 0000              ;   FF00-FF81 - [ 129 B] Командная строка. Заполняется функцией bios_fileExec
  18+ 0000              ;   FF82-FFBF - [ 130 B] Стек
  19+ 0000              ;   FFC0-FFEF - [  32 B] Непереключаемое ОЗУ, драйвера обмена с RAM диском
  20+ 0000              ;   FFE0-FFFF - [  32 B] Оборудование
  21+ 0000              ;-----------------------------------------------------------------------
  22+ 0000
  23+ 0000
  24+ 0000              ;-----------------------------------------------------------------------
  25+ 0000              ; Конфигурация сборки
  26+ 0000              ;-----------------------------------------------------------------------
  27+ 0000
  28+ 0000              RAMD_MAX_PAGE        =  16      ; Максимальное количество страниц RAM диска
  29+ 0000              RAMD_PAGE_END        =  0FFBBh  ; Включить поддержку ДОЗУ большего чем 64 Кб
  30+ 0000              ROM_64K              =  1       ; Включить поддержку ПЗУ 64 Кб Специалиста МХ2
  31+ 0000              ENABLE_COLOR         =  1       ; Включить поддержку цвета
  32+ 0000              EMBED_FONT           =  0       ; Встроить шрифт в программу (при запуске шрифт копируется на FONT_ADDR)
  33+ 0000              LOAD_FONT            =  1       ; Загружать шрифт в ОЗУ
  34+ 0000              FONT_ADDR            =  0E900h  ; Адрес шрфита
  35+ 0000              COLOR_BIOS           =  0F0h    ; Цвет командной строки
  36+ 0000              RAMFOS_COMPATIBILITY =  1       ; Совместимость с RAMFOS (WIP)
  37+ 0000              BOOT_FROM_TAPE       =  0       ; Включить загрузку с ленты при нажатой клавише после сброса
  38+ 0000              FAT16                =  1       ; Включить поддержку FAT16
  39+ 0000
  40+ 0000                  IF  LOAD_FONT
  41+ 0000              FONT_ADDR_DIV_8 = FONT_ADDR/8
  42+ 0000                  ELSE
  43+ 0000 ~            FONT_ADDR_DIV_8 = -1
  44+ 0000                  ENDIF
  45+ 0000
  46+ 0000              ;-----------------------------------------------------------------------
  47+ 0000              ; Переменные ОС в подэкранном пространстве и их начальные значения
  48+ 0000              ; Доступ к переменным и программ польователя:
  49+ 0000              ; ld a, bios_vars.lastKey
  50+ 0000              ;-----------------------------------------------------------------------
  51+ 0000
  52+ 0000                  STRUCT BIOS_VARIABLES
  53+ 0000 ~            _reserv_1     DW      -1              ; 8FDFh -
  54+ 0000 ~            tapeError     DW      0C800h          ; 8FE1h - Адрес, куда происходит переход при ошибке чтения с ленты
  55+ 0000 ~            tapeAddr      DW      -1              ; 8FE3h - Адрес программы загруженной с ленты
  56+ 0000 ~            _reserv_2     DW      -1              ; 8FE5h -
  57+ 0000 ~            charGen       DW      FONT_ADDR_DIV_8 ; 8FE7h - Адрес альтернативного знакогенератора / 8
  58+ 0000 ~            cursorCfg     DB      11h ; 0A9h      ; 8FE9h - Внешний вид курсора (биты: 7 - мигание (если 0), 654 - положение (Y) от низа строки, 3210 - размер по высоте)
  59+ 0000 ~            koi8          DB      -1              ; 8FEAh - 0FFh = включен KOI-8, 0 = включен KOI-7
  60+ 0000 ~            escMode       DB      -1              ; 8FEBh - Обработка ESC-последовательности
  61+ 0000 ~            keyLocks      DB      3Ah             ; 8FECh -
  62+ 0000 ~            _reserv_3     DW      -1              ; 8FEDh -
  63+ 0000 ~            lastLastKey   DB      -1              ; 8FEFh - Предпоследняя нажатая клавиша
  64+ 0000 ~            lastKey       DB      -1              ; 8FF0h - Последняя нажатая клавиша
  65+ 0000 ~            beepFreq      DB      5Fh             ; 8FF1h - Частота звукового сигнала (также влияет на длительность)
  66+ 0000 ~            beepDuration  DB      20h             ; 8FF2h - Длительность звукового сигнала (сколько раз повторять посылку)
  67+ 0000 ~            tapeInverse   DB      0FFh            ; 8FF3h - Признак инверсии данных с ленты
  68+ 0000 ~            cursorDelay   DB      020h            ; 8FF4h -
  69+ 0000 ~            byte_8FF5     DB      0E0h            ; 8FF5h -
  70+ 0000 ~            oldSP         DW      -1              ; 8FF6h - Используется для сохранения SP некоторыми функциями
  71+ 0000 ~            ramPageCount  DB      RAMD_MAX_PAGE   ; 8FF8h - Количество детектированных 64кб страниц RAM-диска
  72+ 0000 ~            flashPage     DB      0               ; 8FF9h - Текущий номер страницы флеш-диска
  73+ 0000 ~            inverse       DW      0               ; 8FFAh - Инвертирование текста (0=нормальный текст, 0FFFFh=инверсный)
  74+ 0000 ~            cursorY       DB      -1              ; 8FFCh - Положение курсора по вертикали в пикселях
  75+ 0000 ~            cursorX       DB      -1              ; 8FFDh - Положение курсора по горизонтали в пикселях / 2
  76+ 0000 ~            writeDelay    DB      28h             ; 8FFEh - Скорость при записи на ленту
  77+ 0000 ~            readDelay     DB      3Ch             ; 8FFFh - Скорость при чтении с ленты
  78+ 0000                  ENDS
  79+ 0000
  80+ 0000              ; Блок переменных BIOS начинается с адреса 8FDFh
  81+ 0000              bios_vars   BIOS_VARIABLES = 8FDFh
  82+ 0000
  83+ 0000              ;-----------------------------------------------------------------------
  84+ 0000              ; Стандартные точки входа ОС
  85+ 0000              ; Отмеченные * применять не рекомендуется
  86+ 0000              ;-----------------------------------------------------------------------
  87+ 0000
  88+ 0000              bios_init            = 0C000h ; Теплая перезагрузка
  89+ 0000
  90+ 0000              ; Устаревшие точки, лечше не применять
  91+ 0000              bios_keyScanOld      = 0C003h ; * Получить код нажатой клавиши, = bios_keyScan
  92+ 0000              bios_drawCursorOld   = 0C006h ; * Нарисовать/стереть курсор
  93+ 0000              bios_clearScreenOld  = 0C010h ; * Оистка экрана
  94+ 0000              bios_printCharOld    = 0C037h ; * Вывод символа на экран
  95+ 0000              bios_beep_Old        = 0C170h ; * Звуковой сигнал
  96+ 0000              bios_delay_l         = 0C18Fh ; * Задержка l циклов
  97+ 0000              bios_delay_b         = 0C190h ; * Задержка b циклов
  98+ 0000              bios_getchOld        = 0C337h ; * Ожидание ввода с клавиатуры
  99+ 0000              bios_tapeReadOld     = 0C377h ; * Чтение байта с магнитофона
 100+ 0000              bios_tapeWriteOld    = 0C3D0h ; * Запись байта на магнитофон
 101+ 0000              bios_cmp_hl_de       = 0C427h ; * Сравнить hl и de
 102+ 0000              bios_memcpy_bc_hl    = 0C42Dh ; * Скопировать блок памяти
 103+ 0000              bios_printStringOld  = 0C438h ; * Вывод строки на экран
 104+ 0000
 105+ 0000              bios_reboot          = 0C800h ; Запустить NC.COM
 106+ 0000              bios_getch           = 0C803h ; Ожидание ввода с клавиатуры
 107+ 0000              bios_tapeRead        = 0C806h ; Чтение байта с магнитофона
 108+ 0000              bios_printChar       = 0C809h ; Вывод символа на экран
 109+ 0000              bios_tapeWrite       = 0C80Ch ; Запись байта на магнитофон
 110+ 0000              bios_input           = 0C80Fh ; Ввод строки с клавиатуры
 111+ 0000              bios_keyCheck        = 0C812h ; Получить код нажатой клавиши, = bios_keyScan
 112+ 0000              bios_printHexByte    = 0C815h ; Вывод HEX числа на экран (байт)
 113+ 0000              bios_printString     = 0C818h ; Вывод строки на экран
 114+ 0000              bios_keyScan         = 0C81Bh ; Получить код нажатой клавиши
 115+ 0000              bios_getCursorPos    = 0C81Eh ; Получить координаты курсора в hl (координаты в пикселях)
 116+ 0000              bios_setCursorPos    = 0C821h ; Установить координаты курсора из hl (координаты в пикселях)
 117+ 0000              bios_tapeLoad        = 0C824h ; Загрузить программу с магнитофона
 118+ 0000              bios_tapeSave        = 0C827h ; Сохранить программу на магнитофон
 119+ 0000              bios_calcCS          = 0C82Ah ; Расчет контрольной суммы
 120+ 0000              bios_printHexWord    = 0C82Dh ; Вывод HEX числа на экран (слово)
 121+ 0000              bios_getMemTop       = 0C830h ; Получить объем доступной памяти
 122+ 0000              bios_setMemTop       = 0C833h ; Установить объем доступной памяти
 123+ 0000              bios_printer         = 0C836h ; Напечатать байт на принтере
 124+ 0000                  IF RAMFOS_COMPATIBILITY
 125+ 0000              bios_strToHex        = 0C839h ; Преобразвоние строки в HEX формате в число
 126+ 0000                  ELSE
 127+ 0000 ~            bios_rebootAlt       = 0C839h ; Запустить NC.COM
 128+ 0000                  ENDIF
 129+ 0000              bios_rebootAlt2      = 0C83Ch ; Запустить NC.COM
 130+ 0000              bios_fileList        = 0C83Fh ; Получить список файлов
 131+ 0000              bios_fileGetSetDrive = 0C842h ; Получить/установить активное устройство
 132+ 0000              bios_fileCreate      = 0C845h ; Создать файл
 133+ 0000              bios_fileLoad        = 0C848h ; Загрузить файл по адресу из заголовка этого файла
 134+ 0000              bios_fileDelete      = 0C84Bh ; Удалить файл
 135+ 0000              bios_fileRename      = 0C84Eh ; Переименовать файл
 136+ 0000              bios_fileLoadInfo    = 0C851h ; Загрузить информацию о файле
 137+ 0000              bios_fileGetSetAddr  = 0C854h ; Получить/установить адрес загрузки файла
 138+ 0000              bios_fileGetSetAttr  = 0C857h ; Получить/установить атрибуты файла
 139+ 0000              bios_fileNamePrepare = 0C85Ah ; Преобразовать имя файла во внутренний формат
 140+ 0000              bios_fileExec        = 0C85Dh ; Запустить файл
 141+ 0000              bios_installDriver   = 0C860h ; Установить драйвер накопителя
 142+ 0000              bios_diskDriver      = 0C863h ; Драйвер выбранного диска
 143+ 0000              bios_fileLoad2       = 0C866h ; Загрузить файл по адресу de
 144+ 0000              bios_printCharReal   = 0C869h ; Вывод символа на экран (только реальные символы)
 145+ 0000              bios_printDecWord    = 0C86Ch ; Вывод числа экран в десятичной форме
 146+ 0000              bios_setRAMDDriver   = 0C86Fh ; Установить драйвр рам-диска
 147+ 0000
 148+ 0000              ;-----------------------------------------------------------------------
 149+ 0000              ; Точки входа драйвера доступа к ДОЗУ
 150+ 0000              ;-----------------------------------------------------------------------
 151+ 0000
 152+ 0000              bios_RAMDRead  = 0FFC0h ; чтение из ДОЗУ
 153+ 0000              bios_RAMDWrite = 0FFD0h ; запись в  ДОЗУ
 154+ 0000
 155+ 0000              ;-----------------------------------------------------------------------
 156+ 0000              ; Адрес таблицы переходов драйвера магнитофона
 157+ 0000              ;-----------------------------------------------------------------------
 158+ 0000
 159+ 0000              TAPE_DRIVER_JUMPS = bios_tapeReadOld    ; размещается на месте бывшей п/п чтения байта
 160+ 0000
 161+ 0000              ;-----------------------------------------------------------------------
 162+ 0000              ; Порты устройств ПК "Специалист-MX2"
 163+ 0000              ;-----------------------------------------------------------------------
 164+ 0000
 165+ 0000              IO_KEYB_A       =  0FFE0h   ; ВВ55 клавиатуры
 166+ 0000              IO_KEYB_B       =  0FFE1h
 167+ 0000              IO_KEYB_C       =  0FFE2h
 168+ 0000              IO_KEYB_MODE    =  0FFE3h
 169+ 0000              IO_PROG_A       =  0FFE4h   ; ВВ55 программатора/флеш диска
 170+ 0000              IO_PROG_B       =  0FFE5h
 171+ 0000              IO_PROG_C       =  0FFE6h
 172+ 0000              IO_PROG_MODE    =  0FFE7h
 173+ 0000              IO_FDD_CMD      =  0FFE8h   ; контроллер дисковода ВГ93
 174+ 0000              IO_FDD_TRACK    =  0FFE9h
 175+ 0000              IO_FDD_SECTOR   =  0FFEAh
 176+ 0000              IO_FDD_DATA     =  0FFEBh
 177+ 0000              IO_TIMER_CH0    =  0FFECh   ; таймер ВИ53
 178+ 0000              IO_TIMER_CH1    =  0FFEDh
 179+ 0000              IO_TIMER_CH2    =  0FFEEh
 180+ 0000              IO_TIMER_MODE   =  0FFEFh
 181+ 0000              IO_FDD_REQ      =  0FFF0h   ; контроллер дисковода
 182+ 0000              IO_FDD_MOTOR    =  0FFF1h
 183+ 0000              IO_FDD_SIDE     =  0FFF2h
 184+ 0000              IO_FDD_DRIVE    =  0FFF3h
 185+ 0000              IO_COLOR        =  0FFF8h   ; регистр цвета
 186+ 0000              IO_PAGE_RAM     =  0FFFCh   ; порт включения основного ОЗУ
 187+ 0000              IO_PAGE_RAMD    =  0FFFDh   ; порт включения ОЗУ RAM-дисков
 188+ 0000              IO_PAGE_ROM     =  0FFFEh   ; порт включения ПЗУ
 189+ 0000              IO_PAGE_STD     =  0FFFFh   ; порт включения STD режима
 190+ 0000
 191+ 0000              ;-----------------------------------------------------------------------
 192+ 0000              ; Структура файловой системы
 193+ 0000              ;-----------------------------------------------------------------------
 194+ 0000
 195+ 0000              ; Структура каталога
 196+ 0000
 197+ 0000                  IF FAT16
 198+ 0000
 199+ 0000              DIR_DESCR_SIZE  = 32    ; Размер дескриптора файла в каталоге (байт)
 200+ 0000              DIR_NAME_LENGTH = 8     ; Длина имени файла  (байт)
 201+ 0000              FAT_ITEM_SIZE   = 2     ; Размер записи в таблице FAT (байт)
 202+ 0000
 203+ 0000              ;-----------------------------------------------------------------------
 204+ 0000              ; Десткриптор файла (одна запись в каталоге) FAT12/16/32
 205+ 0000              ;-----------------------------------------------------------------------
 206+ 0000
 207+ 0000                  STRUCT FILE_DESCRIPTOR  ; 32 байта
 208+ 0000 ~            name            BLOCK   DIR_NAME_LENGTH     ; смещение 00h, 8 байт  - имя файла
 209+ 0000 ~            ext             BLOCK   3                   ; смещение 08h, 3 байта - расширение имени файла
 210+ 0000 ~            attrib          BLOCK   1                   ; смещение 0Bh, 1 байт  - атрибуты файла
 211+ 0000 ~            checkSum        BLOCK   1  ; ntRes          ; смещение 0Ch, 1 байт  - контрольная сумма (!!! временный костыль, в FAT32 это ntRes - используются в Windows NT !!!)
 212+ 0000 ~            ctrTimeTenth    BLOCK   1                   ; смещение 0Dh, 1 байт  - (только FAT32) время создания файла, десятки миллисекунд (0-199)
 213+ 0000 ~            ctrTime         BLOCK   2                   ; смещение 0Eh, 2 байта - (только FAT32) время создания файла, секунды*2 (0-43200)
 214+ 0000 ~            ctrDate         BLOCK   2                   ; смещение 10h, 2 байта - (только FAT32) дата  создания файла
 215+ 0000 ~            loadAddress     BLOCK   2  ; accDate        ; смещение 12h, 2 байта - начальный адрес загрузки в ОЗУ, он же и стартовый (!!! временный костыль, в FAT32 это accDate - дата доступа к файлу !!!)
 216+ 0000 ~            firstClusterHi  BLOCK   2                   ; смещение 14h, 2 байта - номер первого кластера в FAT, старшее слово
 217+ 0000 ~            wrtTime         BLOCK   2                   ; смещение 16h, 2 байта - время модификации файла, секунды*2 (0-43200)
 218+ 0000 ~            wrtDate         BLOCK   2                   ; смещение 18h, 2 байта - дата  модификации файла
 219+ 0000 ~            firstCluster    BLOCK   2                   ; смещение 1Ah, 2 байта - номер первого кластера в FAT, младшее слово
 220+ 0000 ~            size            BLOCK   4                   ; смещение 1Ch, 4 байта - размер файла в байтах
 221+ 0000                  ENDS
 222+ 0000
 223+ 0000              ;-----------------------------------------------------------------------
 224+ 0000              ; Десткриптор файла (одна запись в каталоге) FAT12/16/32
 225+ 0000              ;-----------------------------------------------------------------------
 226+ 0000
 227+ 0000                  ELSE
 228+ 0000 ~
 229+ 0000 ~            DIR_DESCR_SIZE  = 16    ; Размер дескриптора файла в каталоге
 230+ 0000 ~            DIR_NAME_LENGTH = 6     ; Длина имени файла (байт)
 231+ 0000 ~            FAT_ITEM_SIZE   = 1     ; Размер записи в таблице FAT (байт)
 232+ 0000 ~
 233+ 0000 ~            ;-----------------------------------------------------------------------
 234+ 0000 ~            ; Десткриптор файла (одна запись в каталоге) MXOS FAT8
 235+ 0000 ~            ;-----------------------------------------------------------------------
 236+ 0000 ~
 237+ 0000 ~                STRUCT FILE_DESCRIPTOR  ; 16 байт
 238+ 0000 ~            name            BLOCK   DIR_NAME_LENGTH     ; смещение 00h, 6 байт  - имя файла
 239+ 0000 ~            ext             BLOCK   3                   ; смещение 06h, 3 байта - расширение имени файла
 240+ 0000 ~            attrib          BLOCK   1                   ; смещение 09h, 1 байт  - атрибуты файла: 00h - обычный файл, 01h - системный файл
 241+ 0000 ~            loadAddress     BLOCK   2                   ; смещение 0Ah, 2 байта - начальный адрес загрузки в ОЗУ, он же и стартовый
 242+ 0000 ~            size            BLOCK   2                   ; смещение 0Ch, 2 байта - размер файла в байтах - 1
 243+ 0000 ~            checkSum        BLOCK   1                   ; смещение 0Eh, 1 байт  - контрольная сумма
 244+ 0000 ~            firstCluster    BLOCK   1                   ; смещение 0Fh, 1 байт  - номер первого кластера в FAT
 245+ 0000 ~                ENDS
 246+ 0000 ~
 247+ 0000 ~            ;-----------------------------------------------------------------------
 248+ 0000 ~            ; Десткриптор файла (одна запись в каталоге) MXOS FAT8
 249+ 0000 ~            ;-----------------------------------------------------------------------
 250+ 0000 ~
 251+ 0000                  ENDIF
 252+ 0000
 253+ 0000              ;-----------------------------------------------------------------------
 254+ 0000              ; Буферы в памяти
 255+ 0000              ;-----------------------------------------------------------------------
 256+ 0000
 257+ 0000              CLUSTER_SIZE     = 00100h                   ; размер кластера 256 байт
 258+ 0000              CLUSTERS_IN_BANK = 10000h / CLUSTER_SIZE    ; сколько кластеров в 64 кб банке
 259+ 0000
 260+ 0000                  IF FAT16
 261+ 0000
 262+ 0000              FAT_CLUSTERS  = 16      ; сколько кластеров занимает таблица fat
 263+ 0000              DIR_CLUSTERS  = 4       ; сколько кластеров занимает корневой каталог
 264+ 0000              FAT_BUFFER    = 8000h - (FAT_CLUSTERS + DIR_CLUSTERS) * CLUSTER_SIZE; адрес буфера таблицы fat в памяти
 265+ 0000
 266+ 0000                  ELSE
 267+ 0000 ~
 268+ 0000 ~            FAT_CLUSTERS  = 1       ; сколько кластеров занимает таблица fat
 269+ 0000 ~            DIR_CLUSTERS  = 3       ; сколько кластеров занимает корневой каталог
 270+ 0000 ~            FAT_BUFFER    = 0FB00h  ; адрес буфера таблицы fat в памяти
 271+ 0000 ~
 272+ 0000                  ENDIF
 273+ 0000
 274+ 0000              FAT_SIZE      = FAT_CLUSTERS * CLUSTER_SIZE  ; размер таблицы fat в байтах
 275+ 0000              DIR_SIZE      = DIR_CLUSTERS * CLUSTER_SIZE  ; размер корневого каталога в байтах
 276+ 0000
 277+ 0000              DIR_BUFFER    = FAT_BUFFER + FAT_SIZE         ; адрес буфера корневого каталога в памяти
 278+ 0000
 279+ 0000              DIR_MAX_FILES = DIR_CLUSTERS * 256 / DIR_DESCR_SIZE    ; Максимум файлов в каталоге
 280+ 0000
 281+ 0000              BAT_BUFFER    = 0FC00h  ; буфер для загрузки BAT файла
 282+ 0000              CMD_LINE      = 0FF00h  ; 192 байта, но в конце стек
 283+ 0000              STACK_ADDR    = 0FFC0h  ; стек
 284+ 0000
 285+ 0000              ;-----------------------------------------------------------------------
 286+ 0000              ; Всякие полезности
 287+ 0000              ;-----------------------------------------------------------------------
 288+ 0000
 289+ 0000              ; Макрос для заполнения памяти от текущего адреса до указанного
 290+ 0000                  MACRO ORG_PAD adr
 291+ 0000 ~                     IF $ > adr
 292+ 0000 ~                       ; вывод сообщения об ошибке
 293+ 0000 ~                       ASSERT 0
 294+ 0000 ~                       DISPLAY /l, "Error! ORG_PAD failed! ", $, " is more than ", adr
 295+ 0000 ~                     ELSE
 296+ 0000 ~                       ; заполнение памяти
 297+ 0000 ~                       BLOCK adr-$, 0FFh
 298+ 0000 ~                     ENDIF
 299+ 0000 ~                     ORG adr
 300+ 0000                  ENDM
 301+ 0000
 302+ 0000                  MACRO ORG_PAD0 adr
 303+ 0000 ~                     IF $ > adr
 304+ 0000 ~                       ; вывод сообщения об ошибке
 305+ 0000 ~                       ASSERT 0
 306+ 0000 ~                       DISPLAY /l, "Error! ORG_PAD0 failed! ", $, " is more than ", adr
 307+ 0000 ~                     ELSE
 308+ 0000 ~                       ; заполнение памяти
 309+ 0000 ~                       BLOCK adr-$, 0
 310+ 0000 ~                     ENDIF
 311+ 0000 ~                     ORG adr
 312+ 0000                  ENDM
 313+ 0000
 314+ 0000              ; Макросы для проверки текущего адреса
 315+ 0000                  MACRO ASSERT_EQUAL adr
 316+ 0000 ~                     IF $ != adr
 317+ 0000 ~                       ASSERT 0
 318+ 0000 ~                       DISPLAY /l, "Error! Entry point has been shifted (", $, " != ", adr, ")"
 319+ 0000 ~                     ENDIF
 320+ 0000                  ENDM
 321+ 0000
 322+ 0000                  MACRO ASSERT_DONT_FIT adr
 323+ 0000 ~                     IF $ > adr
 324+ 0000 ~                       ASSERT 0
 325+ 0000 ~                       DISPLAY /l, "Error! Image did not fit (", $, " > ", adr, ")"
 326+ 0000 ~                     ENDIF
 327+ 0000                  ENDM
 328+ 0000
 329+ 0000              ;-----------------------------------------------------------------------
 330+ 0000              ; Конец
 331+ 0000              ;-----------------------------------------------------------------------
 332+ 0000
# file closed: D:\Projects\Specialist\MySoft\MXOS-Z80\E\../include/mxos.inc
   9  0000
  10  0000              ; Используемые подпрограммы DOS.SYS:
  11  0000              ; bios_beep_Old         = 0C170h
  12  0000              ; bios_delay_b          = 0C190h
  13  0000              ; bios_cmp_hl_de        = 0C427h
  14  0000              ; bios_memcpy_bc_hl     = 0C42Dh
  15  0000              ; bios_reboot           = 0C800h
  16  0000              ; bios_getch            = 0C803h
  17  0000              ; bios_tapeRead         = 0C806h
  18  0000              ; bios_printChar        = 0C809h
  19  0000              ; bios_tapeWrite        = 0C80Ch
  20  0000              ; bios_printString      = 0C818h
  21  0000              ; bios_calcCS           = 0C82Ah
  22  0000              ; bios_fileCreate       = 0C845h
  23  0000              ; bios_fileLoadInfo     = 0C851h
  24  0000              ; bios_fileNamePrepare  = 0C85Ah
  25  0000              ; bios_fileLoad2        = 0C866h
  26  0000
  27  0000              ; Используемые переменные DOS.SYS:
  28  0000              ; bios_vars.lastKey     = 08FF0h
  29  0000              ; bios_vars.tapeInverse = 08FF3h
  30  0000              ; bios_vars.cursorDelay = 08FF4h
  31  0000              ; bios_vars.inverse     = 08FFAh
  32  0000              ; bios_vars.cursorY     = 08FFCh
  33  0000
  34  0000              ; Используемые порты устройств:
  35  0000              ; IO_KEYB_A = 0FFE0h
  36  0000              ; IO_KEYB_B = 0FFE1h
  37  0000
  38  0000              ; Собственные переменные
  39  0000                  STRUCT EDITOR_VARIABLES
  40  0000 ~            buffer  BLOCK  10, 0
  41  0000 ~            last    BLOCK  1,  0
  42  0000                  ENDS
  43  0000
  44  0000              ; Блок переменных редактора начинается с адреса 8F80H
  45  0000              editor_vars EDITOR_VARIABLES = 8F80H
  46  0000
  47  0000              ; Начало программы
  48  0000                      ORG   0D000H
  49  D000
  50  D000              SMC1:
  51  D000 C3 26 DE             JP    LBL145
  52  D003 C3 2F DA             JP    LBL103
  53  D006 00 18 00             DB    0,18h,0
  54  D009 85           LBL1:   ADD   A,L
  55  D00A 21 22 D0     LBL2:   LD    HL,REF2             ; 53282
  56  D00D CD 18 C8             CALL  bios_printString
  57  D010 21 00 70     LBL3:   LD    HL,7000H    ; 28672; [2]
  58  D013 11 00 8F             LD    DE,8F00H    ; 36608
  59  D016 CD 2A C8             CALL  bios_calcCS
  60  D019 21 D1 D0             LD    HL,LBL4             ; 53457
  61  D01C 22 01 D0             LD    (SMC1+1),HL
  62  D01F C3 D1 D0             JP    LBL4
  63  D022 0A 20 20 20  REF2:   DB    0AH,"          EDITOR VERSION 4.1, (C) OM"
  63  D026 20 20 20 20
  63  D02A 20 20 20 45
  63  D02E 44 49 54 4F
  63  D032 52 20 56 45
  63  D036 52 53 49 4F
  63  D03A 4E 20 34 2E
  63  D03E 31 2C 20 28
  63  D042 43 29 20 4F
  63  D046 4D
  64  D047 53           REF3:   DB    "S"
  65  D048 4B           REF4:   DB    "K"
  66  D049 20           REF5:   DB    " "
  67  D04A 4B 53 4F 46  REF6:   DB    "KSOFT ",27H,"92",2EH,00H
  67  D04E 54 20 27 39
  67  D052 32 2E 00
  68  D055 00 00        VAR1:   DW    0000H
  69  D057 00 00        VAR2:   DW    0000H
  70  D059 00 00        VAR3:   DW    0000H
  71  D05B 00           VAR4:   DB    00H
  72  D05C 00           VAR5:   DB    00H
  73  D05D 00 00        VAR6:   DW    0000H
  74  D05F 00 00        VAR7:   DW    0000H
  75  D061 00 00        VAR8:   DW    0000H
  76  D063 04 05 08     REF7:   DB    04H,05H,08H
  77  D066 00           VAR9:   DB    00H
  78  D067 1F 0A 20 20  REF8:   DB    1FH,0AH,"  OUT OF MEMORY",2EH,00H
  78  D06B 4F 55 54 20
  78  D06F 4F 46 20 4D
  78  D073 45 4D 4F 52
  78  D077 59 2E 00
  79  D07A 1F           REF9:   DB    1FH
  80  D07B 0A 20 46 49  REF10:  DB    0AH," FILE: ",00H
  80  D07F 4C 45 3A 20
  80  D083 00
  81  D084 08 20 08 00  REF11:  DB    08H,20H,08H,00H           ; <-, ' ', <-
  82  D088 0A 20 4D 49  REF12:  DB    0AH," MISTAKE",2EH,00H
  82  D08C 53 54 41 4B
  82  D090 45 2E 00
  83  D093 53 45 41 52  REF13:  DB    "SEARCH: "
  83  D097 43 48 3A 20
  84  D09B 00 41 4C 4C  REF14:  DB    00H,"ALL V33",00H,"RLN]N",00H,"y"
  84  D09F 20 56 33 33
  84  D0A3 00 52 4C 4E
  84  D0A7 5D 4E 00 79
  85  D0AB 1F 0A 20 4E  REF15:  DB    1FH,0AH," NEW ?",00H
  85  D0AF 45 57 20 3F
  85  D0B3 00
  86  D0B4 49 4E 53 45  REF16:  DB    "INSERT   ",00H
  86  D0B8 52 54 20 20
  86  D0BC 20 00
  87  D0BE 4F 56 45 52  REF17:  DB    "OVERWRITE",00H
  87  D0C2 57 52 49 54
  87  D0C6 45 00
  88  D0C8 4C 49 4E 45  REF18:  DB    "LINE",00H
  88  D0CC 00
  89  D0CD 43 4F 4C 00  REF19:  DB    "COL",00H
  90  D0D1 21 00 00     LBL4:   LD    HL,0000H
  91  D0D4 39                   ADD   HL,SP
  92  D0D5 22 CD DB             LD    (SMC4+1),HL
  93  D0D8 3E 10        LBL5:   LD    A,10H         ; 16
  94  D0DA 32 8A 8F             LD    (editor_vars.last),A
  95  D0DD AF                   XOR   A
  96  D0DE 32 5B D0             LD    (VAR4),A
  97  D0E1 67                   LD    H,A
  98  D0E2 6F                   LD    L,A
  99  D0E3 22 5D D0             LD    (VAR6),HL
 100  D0E6 22 FA 8F             LD    (bios_vars.inverse),HL
 101  D0E9 21 01 00             LD    HL,0001H    ; 1
 102  D0EC 22 61 D0             LD    (VAR8),HL
 103  D0EF 2A 06 D0             LD    HL,(0D006H)
 104  D0F2 22 55 D0             LD    (VAR1),HL
 105  D0F5 22 59 D0             LD    (VAR3),HL
 106  D0F8 5D                   LD    E,L
 107  D0F9 54                   LD    D,H
 108  D0FA 7E           LBL6:   LD    A,(HL)
 109  D0FB B7                   OR    A
 110  D0FC C2 01 D1             JP    NZ,LBL7
 111  D0FF 3D                   DEC   A
 112  D100 77                   LD    (HL),A
 113  D101 3C           LBL7:   INC   A
 114  D102 CA 09 D1             JP    Z,LBL8
 115  D105 23                   INC   HL
 116  D106 C3 FA D0             JP    LBL6
 117  D109 CD FA D9     LBL8:   CALL  SUB38
 118  D10C C2 14 D1             JP    NZ,LBL9
 119  D10F 36 0D                LD    (HL),0DH    ; 13
 120  D111 23                   INC   HL
 121  D112 36 FF                LD    (HL),0FFH   ; 255
 122  D114 22 57 D0     LBL9:   LD    (VAR2),HL
 123  D117 0E 1F        LBL10:  LD    C,1FH         ; 31
 124  D119 CD 09 C8             CALL  bios_printChar
 125  D11C CD 09 D2             CALL  SUB1
 126  D11F 21 1F D1     REF21:  LD    HL,REF21    ; 53535
 127  D122 E5                   PUSH  HL
 128  D123 2A FC 8F             LD    HL,(bios_vars.cursorY)
 129  D126 E5                   PUSH  HL
 130  D127 CD 59 DC             CALL  SUB56
 131  D12A 21 00 00             LD    HL,0000H
 132  D12D CD D8 D3             CALL  SUB14
 133  D130 EB                   EX    DE,HL
 134  D131 21 F9 8C             LD    HL,8CF9H    ; 36089
 135  D134 22 FC 8F             LD    (bios_vars.cursorY),HL
 136  D137 EB                   EX    DE,HL
 137  D138 11 F6 FF             LD    DE,0FFF6H   ; 65526
 138  D13B 06 20                LD    B,20H         ; 32 ' '
 139  D13D 23                   INC   HL
 140  D13E CD 57 DB             CALL  SUB51
 141  D141 7D                   LD    A,L
 142  D142 C6 3A                ADD   A,3AH         ; 58 ':'
 143  D144 4F                   LD    C,A
 144  D145 CD 09 C8             CALL  bios_printChar
 145  D148 CD 62 DC             CALL  SUB57
 146  D14B E1                   POP   HL
 147  D14C 22 FC 8F             LD    (bios_vars.cursorY),HL
 148  D14F C3 ED DD             JP    LBL141
 149  D152 4F           LBL11:  LD    C,A           ; [2]
 150  D153 FE 7F                CP    7FH           ; 127
 151  D155 CA E3 D3             JP    Z,LBL33
 152  D158 FE 07                CP    07H           ; 7
 153  D15A CA D0 D9             JP    Z,LBL102
 154  D15D FE 01                CP    01H           ; 1
 155  D15F CA 4E D5             JP    Z,LBL54
 156  D162 FE 02                CP    02H           ; 2
 157  D164 CA 73 D5             JP    Z,LBL57
 158  D167 FE 20                CP    20H           ; 32 ' '
 159  D169 D2 7D D3             JP    NC,LBL27
 160  D16C B7                   OR    A
 161  D16D CA CC D3             JP    Z,LBL31
 162  D170 21 83 D1             LD    HL,REF22    ; 53635
 163  D173 7E           LBL12:  LD    A,(HL)
 164  D174 B7                   OR    A
 165  D175 CA 07 DA             JP    Z,SUB40
 166  D178 23                   INC   HL
 167  D179 5E                   LD    E,(HL)
 168  D17A 23                   INC   HL
 169  D17B 56                   LD    D,(HL)
 170  D17C 23                   INC   HL
 171  D17D B9                   CP    C
 172  D17E C2 73 D1             JP    NZ,LBL12
 173  D181 D5                   PUSH  DE
 174  D182 C9                   RET
 175  D183 1A 49 D2 19  REF22:  DB    1AH,49H,0D2H,19H  ; ".I.."
 176  D187 73 D2 08 EE          DB    73H,0D2H,08H,0EEH ; "s..."
 177  D18B D2 18 E3 D2          DB    0D2H,18H,0E3H,0D2H        ; "...."
 178  D18F 0D 13 D3 09          DB    0DH,13H,0D3H,09H  ; "...."
 179  D193 F6 D4 1F E0          DB    0F6H,0D4H,1FH,0E0H        ; "...."
 180  D197 D1 02 EE D1          DB    0D1H,02H,0EEH,0D1H        ; "...."
 181  D19B 06 6B D8 0C          DB    06H,6BH,0D8H,0CH  ; ".k.."
 182  D19F 0E D3 0A FE          DB    0EH,0D3H,0AH,0FEH ; "...."
 183  D1A3 D2 1B A8 D1          DB    0D2H,1BH,0A8H,0D1H        ; "...."
 184  D1A7 00 CD 17 D4          DB    00H,0CDH,17H,0D4H ; "...."
 185  D1AB CD 03 C8 4F          DB    0CDH,03H,0C8H,4FH ; "...O"
 186  D1AF 21 B5 D1 C3          DB    21H,0B5H,0D1H,0C3H        ; "!..."
 187  D1B3 73 D1 0C FA          DB    73H,0D1H,0CH,0FAH ; "s..."
 188  D1B7 D1 0A 9E D5          DB    0D1H,0AH,9EH,0D5H ; "...."
 189  D1BB 4C B2 D5 44          DB    4CH,0B2H,0D5H,44H ; "L..D"
 190  D1BF E3 D5 55 57          DB    0E3H,0D5H,55H,57H ; "..UW"
 191  D1C3 D6 4F 80 D6          DB    0D6H,4FH,80H,0D6H ; ".O.."
 192  D1C7 49 10 D7 56          DB    49H,10H,0D7H,56H  ; "I..V"
 193  D1CB 00 D8 47 05          DB    00H,0D8H,47H,05H  ; "..G."
 194  D1CF D8 4E B4 D9          DB    0D8H,4EH,0B4H,0D9H        ; ".N.."
 195  D1D3 4A D7 D8 53          DB    4AH,0D7H,0D8H,53H ; "J..S"
 196  D1D7 06 D9 43 3F          DB    06H,0D9H,43H,3FH  ; "..C?"
 197  D1DB D9 4D 72 D9          DB    0D9H,4DH,72H,0D9H ; ".Mr."
 198  D1DF 00                   DB    00H                   ; "."
 199  D1E0 0E 1F                LD    C,1FH         ; 31
 200  D1E2 CD 09 C8             CALL  bios_printChar
 201  D1E5 CD 17 D4             CALL  SUB15
 202  D1E8 CD CB DB             CALL  SUB54
 203  D1EB C3 00 C8             JP    bios_reboot
 204  D1EE CD 17 D4             CALL  SUB15
 205  D1F1 0E 1F                LD    C,1FH         ; 31
 206  D1F3 CD 09 C8             CALL  bios_printChar
 207  D1F6 CD CB DB             CALL  SUB54
 208  D1F9 C9                   RET
 209  D1FA 21 01 00     LBL13:  LD    HL,0001H    ; 1; [4]
 210  D1FD 22 61 D0             LD    (VAR8),HL
 211  D200 2A 06 D0             LD    HL,(0D006H)
 212  D203 22 55 D0             LD    (VAR1),HL
 213  D206 22 59 D0             LD    (VAR3),HL
 214  D209 2A 55 D0     SUB1:   LD    HL,(VAR1)   ; [10]
 215  D20C EB                   EX    DE,HL
 216  D20D 2A 59 D0             LD    HL,(VAR3)
 217  D210 CD FA D9             CALL  SUB38
 218  D213 CA 1C D2             JP    Z,SUB2
 219  D216 CD 04 DB             CALL  SUB49
 220  D219 C3 09 D2             JP    SUB1
 221  D21C CD 2E DC     SUB2:   CALL  SUB55         ; [2]
 222  D21F 01 0C 18     SUB3:   LD    BC,180CH    ; 6156; [2]
 223  D222 CD 09 C8     LBL14:  CALL  bios_printChar
 224  D225 CD 99 D2             CALL  SUB7
 225  D228 3C                   INC   A
 226  D229 CA 32 D2             JP    Z,SUB4
 227  D22C 05                   DEC   B
 228  D22D 0E 0A                LD    C,0AH         ; 10
 229  D22F C2 22 D2             JP    NZ,LBL14
 230  D232 CD 88 DB     SUB4:   CALL  SUB53         ; [2]
 231  D235 0E 0C                LD    C,0CH         ; 12
 232  D237 C3 09 C8             JP    bios_printChar
 233  D23A CD 17 D4     LBL15:  CALL  SUB15         ; [3]
 234  D23D CD 1D DA     SUB5:   CALL  SUB43         ; [5]
 235  D240 2A 55 D0             LD    HL,(VAR1)
 236  D243 CD 1C D2             CALL  SUB2
 237  D246 C3 26 DA             JP    SUB44
 238  D249 CD 17 D4     SUB6:   CALL  SUB15
 239  D24C CD EE DA             CALL  SUB48
 240  D24F C8                   RET   Z
 241  D250 CD 16 DB             CALL  SUB50
 242  D253 3A FC 8F             LD    A,(bios_vars.cursorY)
 243  D256 FE EE                CP    0EEH          ; 238
 244  D258 C2 09 C8             JP    NZ,bios_printChar
 245  D25B 2A 55 D0             LD    HL,(VAR1)
 246  D25E CD 12 DA             CALL  SUB42
 247  D261 22 55 D0             LD    (VAR1),HL
 248  D264 CD 1D DA             CALL  SUB43
 249  D267 CD 5F DA             CALL  SUB45
 250  D26A 2A 59 D0             LD    HL,(VAR3)
 251  D26D CD 99 D2             CALL  SUB7
 252  D270 C3 26 DA             JP    SUB44
 253  D273 CD 17 D4             CALL  SUB15
 254  D276 CD 04 DB             CALL  SUB49
 255  D279 C8                   RET   Z
 256  D27A CD 16 DB             CALL  SUB50
 257  D27D 3A FC 8F             LD    A,(bios_vars.cursorY)
 258  D280 FE 08                CP    08H           ; 8
 259  D282 C2 09 C8             JP    NZ,bios_printChar
 260  D285 2A 59 D0             LD    HL,(VAR3)
 261  D288 22 55 D0             LD    (VAR1),HL
 262  D28B E5                   PUSH  HL
 263  D28C CD 8E DA             CALL  SUB46
 264  D28F E1                   POP   HL
 265  D290 CD 1D DA             CALL  SUB43
 266  D293 CD 99 D2             CALL  SUB7
 267  D296 C3 26 DA             JP    SUB44
 268  D299 CD 0E D3     SUB7:   CALL  SUB9          ; [4]
 269  D29C CD C7 D2             CALL  SUB8
 270  D29F D2 A7 D2             JP    NC,LBL16
 271  D2A2 3E FF                LD    A,0FFH                ; 255
 272  D2A4 32 FA 8F             LD    (bios_vars.inverse),A
 273  D2A7 7E           LBL16:  LD    A,(HL)
 274  D2A8 FE 0D                CP    0DH           ; 13
 275  D2AA 0E 20                LD    C,20H         ; 32 ' '
 276  D2AC CC 09 C8             CALL  Z,bios_printChar
 277  D2AF 7E           LBL17:  LD    A,(HL)
 278  D2B0 4F                   LD    C,A
 279  D2B1 3C                   INC   A
 280  D2B2 CA BE D2             JP    Z,LBL18
 281  D2B5 23                   INC   HL
 282  D2B6 CD 09 C8             CALL  bios_printChar
 283  D2B9 FE 0E                CP    0EH           ; 14
 284  D2BB C2 AF D2             JP    NZ,LBL17
 285  D2BE AF           LBL18:  XOR   A
 286  D2BF 32 FA 8F             LD    (bios_vars.inverse),A
 287  D2C2 32 FB 8F             LD    (bios_vars.inverse+1),A
 288  D2C5 79                   LD    A,C
 289  D2C6 C9                   RET
 290  D2C7 D5           SUB8: PUSH  DE            ; [7]
 291  D2C8 EB                   EX    DE,HL
 292  D2C9 2A 5D D0             LD    HL,(VAR6)
 293  D2CC 7C                   LD    A,H
 294  D2CD B5                   OR    L
 295  D2CE CA E0 D2             JP    Z,LBL19
 296  D2D1 2B                   DEC   HL
 297  D2D2 CD FA D9             CALL  SUB38
 298  D2D5 D2 E0 D2             JP    NC,LBL19
 299  D2D8 2A 5F D0             LD    HL,(VAR7)
 300  D2DB 2B                   DEC   HL
 301  D2DC CD FA D9             CALL  SUB38
 302  D2DF 3F                   CCF
 303  D2E0 EB           LBL19:  EX    DE,HL         ; [2]
 304  D2E1 D1                   POP   DE
 305  D2E2 C9                   RET
 306  D2E3 CD E9 D9             CALL  SUB36
 307  D2E6 CA D0 DB             JP    Z,LBL117
 308  D2E9 06 BA        LBL20:  LD    B,0BAH                ; 186
 309  D2EB C3 F6 D2             JP    LBL21
 310  D2EE CD E9 D9             CALL  SUB36
 311  D2F1 CA FD DB             JP    Z,LBL120
 312  D2F4 06 00                LD    B,00H
 313  D2F6 3A FD 8F     LBL21:  LD    A,(bios_vars.cursorY+1)
 314  D2F9 B8                   CP    B
 315  D2FA C8                   RET   Z
 316  D2FB C3 09 C8             JP    bios_printChar
 317  D2FE CD 51 D3     LBL22:  CALL  SUB12
 318  D301 CD 45 D3             CALL  SUB10
 319  D304 21 0A D0             LD    HL,LBL2             ; 53258
 320  D307 CD 00 DA             CALL  SUB39
 321  D30A 7B                   LD    A,E
 322  D30B C3 13 D5             JP    LBL48
 323  D30E AF           SUB9:   XOR   A             ; [4]
 324  D30F 32 FD 8F             LD    (bios_vars.cursorY+1),A
 325  D312 C9                   RET
 326  D313 2A 59 D0             LD    HL,(VAR3)
 327  D316 CD C7 D2             CALL  SUB8
 328  D319 DA 07 DA             JP    C,SUB40
 329  D31C CD 51 D3             CALL  SUB12
 330  D31F CD 45 D3             CALL  SUB10
 331  D322 3E 0D                LD    A,0DH         ; 13
 332  D324 12                   LD    (DE),A
 333  D325 CD 17 D4             CALL  SUB15
 334  D328 CD 0E D3             CALL  SUB9
 335  D32B 2A 59 D0             LD    HL,(VAR3)
 336  D32E 0E 18                LD    C,18H         ; 24
 337  D330 7E           LBL23:  LD    A,(HL)
 338  D331 FE 20                CP    20H           ; 32 ' '
 339  D333 C2 3D D3             JP    NZ,LBL24
 340  D336 CD 09 C8             CALL  bios_printChar
 341  D339 23                   INC   HL
 342  D33A C3 30 D3             JP    LBL23
 343  D33D 0E 1A        LBL24:  LD    C,1AH         ; 26
 344  D33F CD 49 D2             CALL  SUB6
 345  D342 C3 8E DA             JP    SUB46
 346  D345 11 4A D0     SUB10:  LD    DE,REF6             ; 53322; [4]
 347  D348 1B           SUB11:  DEC   DE            ; [3]
 348  D349 1A                   LD    A,(DE)
 349  D34A FE 20                CP    20H           ; 32 ' '
 350  D34C CA 48 D3             JP    Z,SUB11
 351  D34F 13                   INC   DE
 352  D350 C9                   RET
 353  D351 3A 5B D0     SUB12:  LD    A,(VAR4)    ; [7]
 354  D354 B7                   OR    A
 355  D355 C0                   RET   NZ
 356  D356 2F                   cpl
 357  D357 32 5B D0             LD    (VAR4),A
 358  D35A 21 0A D0             LD    HL,LBL2             ; 53258
 359  D35D 3E 40                LD    A,40H         ; 64 '@'
 360  D35F 36 20        LBL25:  LD    (HL),20H    ; 32 ' '
 361  D361 23                   INC   HL
 362  D362 3D                   DEC   A
 363  D363 C2 5F D3             JP    NZ,LBL25
 364  D366 11 0A D0             LD    DE,LBL2             ; 53258
 365  D369 2A 59 D0             LD    HL,(VAR3)
 366  D36C 06 40                LD    B,40H         ; 64 '@'
 367  D36E 7E           LBL26:  LD    A,(HL)
 368  D36F FE 0D                CP    0DH           ; 13
 369  D371 C8                   RET   Z
 370  D372 FE FF                CP    0FFH          ; 255
 371  D374 C8                   RET   Z
 372  D375 05                   DEC   B
 373  D376 C8                   RET   Z
 374  D377 12                   LD    (DE),A
 375  D378 23                   INC   HL
 376  D379 13                   INC   DE
 377  D37A C3 6E D3             JP    LBL26
 378  D37D 2A 59 D0     LBL27:  LD    HL,(VAR3)
 379  D380 CD C7 D2             CALL  SUB8
 380  D383 DA 07 DA             JP    C,SUB40
 381  D386 CD 51 D3             CALL  SUB12
 382  D389 CD D5 D3             CALL  SUB13
 383  D38C 3A 5C D0             LD    A,(VAR5)
 384  D38F B7                   OR    A
 385  D390 C2 A2 D3             JP    NZ,LBL28
 386  D393 71                   LD    (HL),C
 387  D394 CD 09 C8             CALL  bios_printChar
 388  D397 3A FD 8F             LD    A,(bios_vars.cursorY+1)
 389  D39A FE BD                CP    0BDH          ; 189
 390  D39C C0                   RET   NZ
 391  D39D 0E 08                LD    C,08H         ; 8
 392  D39F C3 09 C8             JP    bios_printChar
 393  D3A2 11 49 D0     LBL28:  LD    DE,REF5             ; 53321
 394  D3A5 CD 48 D3             CALL  SUB11
 395  D3A8 E5                   PUSH  HL
 396  D3A9 21 49 D0             LD    HL,REF5             ; 53321
 397  D3AC CD FA D9             CALL  SUB38
 398  D3AF CA B3 D3             JP    Z,LBL29
 399  D3B2 13                   INC   DE
 400  D3B3 E1           LBL29:  POP   HL
 401  D3B4 CD 1D DA             CALL  SUB43
 402  D3B7 46           LBL30:  LD    B,(HL)
 403  D3B8 71                   LD    (HL),C
 404  D3B9 CD 09 C8             CALL  bios_printChar
 405  D3BC 48                   LD    C,B
 406  D3BD 23                   INC   HL
 407  D3BE CD FA D9             CALL  SUB38
 408  D3C1 DA B7 D3             JP    C,LBL30
 409  D3C4 CD 26 DA             CALL  SUB44
 410  D3C7 0E 18                LD    C,18H         ; 24
 411  D3C9 C3 E9 D2             JP    LBL20
 412  D3CC 21 5C D0     LBL31:  LD    HL,VAR5             ; 53340
 413  D3CF 7E                   LD    A,(HL)
 414  D3D0 2F                   cpl
 415  D3D1 77                   LD    (HL),A
 416  D3D2 C3 C7 DA             JP    SUB47
 417  D3D5 21 0A D0     SUB13:  LD    HL,LBL2             ; 53258; [4]
 418  D3D8 3A FD 8F     SUB14:  LD    A,(bios_vars.cursorY+1)        ; [4]
 419  D3DB B7                   OR    A
 420  D3DC C8           LBL32:  RET   Z
 421  D3DD 23                   INC   HL
 422  D3DE D6 03                SUB   03H           ; 3
 423  D3E0 C3 DC D3             JP    LBL32
 424  D3E3 CD 51 D3     LBL33:  CALL  SUB12
 425  D3E6 CD D5 D3             CALL  SUB13
 426  D3E9 E5                   PUSH  HL
 427  D3EA 4D                   LD    C,L
 428  D3EB 44                   LD    B,H
 429  D3EC 03                   INC   BC
 430  D3ED 11 49 D0             LD    DE,REF5             ; 53321
 431  D3F0 CD EF D9             CALL  SUB37
 432  D3F3 E1                   POP   HL
 433  D3F4 11 49 D0             LD    DE,REF5             ; 53321
 434  D3F7 CD 48 D3             CALL  SUB11
 435  D3FA E5                   PUSH  HL
 436  D3FB 21 49 D0             LD    HL,REF5             ; 53321
 437  D3FE CD FA D9             CALL  SUB38
 438  D401 CA 05 D4             JP    Z,LBL34
 439  D404 13                   INC   DE
 440  D405 E1           LBL34:  POP   HL
 441  D406 CD 1D DA             CALL  SUB43
 442  D409 4E           LBL35:  LD    C,(HL)
 443  D40A CD 09 C8             CALL  bios_printChar
 444  D40D CD FA D9             CALL  SUB38
 445  D410 23                   INC   HL
 446  D411 DA 09 D4             JP    C,LBL35
 447  D414 C3 26 DA             JP    SUB44
 448  D417 3A 5B D0     SUB15:  LD    A,(VAR4)    ; [10]
 449  D41A B7                   OR    A
 450  D41B C8                   RET   Z
 451  D41C AF                   XOR   A
 452  D41D 32 5B D0             LD    (VAR4),A
 453  D420 C5                   PUSH  BC
 454  D421 CD 45 D3             CALL  SUB10
 455  D424 21 0A D0             LD    HL,LBL2             ; 53258
 456  D427 CD 00 DA             CALL  SUB39
 457  D42A 2A 59 D0             LD    HL,(VAR3)
 458  D42D EB                   EX    DE,HL
 459  D42E 19                   ADD   HL,DE
 460  D42F EB                   EX    DE,HL
 461  D430 CD 12 DA             CALL  SUB42
 462  D433 3C                   INC   A
 463  D434 CA 38 D4             JP    Z,LBL36
 464  D437 2B                   DEC   HL
 465  D438 CD 49 D4     LBL36:  CALL  SUB16
 466  D43B 2A 59 D0             LD    HL,(VAR3)
 467  D43E 01 0A D0             LD    BC,LBL2             ; 53258
 468  D441 CD FA D9             CALL  SUB38
 469  D444 C4 EF D9             CALL  NZ,SUB37
 470  D447 C1                   POP   BC
 471  D448 C9                   RET
 472  D449 CD FA D9     SUB16:  CALL  SUB38         ; [5]
 473  D44C C8                   RET   Z
 474  D44D F5                   PUSH  AF
 475  D44E D5                   PUSH  DE
 476  D44F CD 00 DA             CALL  SUB39
 477  D452 42                   LD    B,D
 478  D453 4B                   LD    C,E
 479  D454 EB                   EX    DE,HL
 480  D455 2A 5D D0             LD    HL,(VAR6)
 481  D458 CD FA D9             CALL  SUB38
 482  D45B DA 62 D4             JP    C,LBL37
 483  D45E 09                   ADD   HL,BC
 484  D45F 22 5D D0             LD    (VAR6),HL
 485  D462 2A 5F D0     LBL37:  LD    HL,(VAR7)
 486  D465 EB                   EX    DE,HL
 487  D466 CD FA D9             CALL  SUB38
 488  D469 EB                   EX    DE,HL
 489  D46A D2 71 D4             JP    NC,LBL38
 490  D46D 09                   ADD   HL,BC
 491  D46E 22 5F D0             LD    (VAR7),HL
 492  D471 EB           LBL38:  EX    DE,HL
 493  D472 D1                   POP   DE
 494  D473 F1                   POP   AF
 495  D474 DA A6 D4             JP    C,LBL42
 496  D477 D5                   PUSH  DE
 497  D478 4B                   LD    C,E
 498  D479 42                   LD    B,D
 499  D47A EB                   EX    DE,HL
 500  D47B 2A 57 D0             LD    HL,(VAR2)
 501  D47E 23                   INC   HL
 502  D47F EB                   EX    DE,HL
 503  D480 CD 00 DA             CALL  SUB39
 504  D483 7B           LBL39:  LD    A,E
 505  D484 E6 FE                AND   0FEH          ; 254
 506  D486 B2                   OR    D
 507  D487 CA 97 D4             JP    Z,LBL40
 508  D48A 7E                   LD    A,(HL)
 509  D48B 02                   LD    (BC),A
 510  D48C 03                   INC   BC
 511  D48D 23                   INC   HL
 512  D48E 1B                   DEC   DE
 513  D48F 7E                   LD    A,(HL)
 514  D490 02                   LD    (BC),A
 515  D491 03                   INC   BC
 516  D492 23                   INC   HL
 517  D493 1B                   DEC   DE
 518  D494 C3 83 D4             JP    LBL39
 519  D497 BB           LBL40:  CP    E
 520  D498 CA 9E D4             JP    Z,LBL41
 521  D49B 7E                   LD    A,(HL)
 522  D49C 02                   LD    (BC),A
 523  D49D 03                   INC   BC
 524  D49E 0B           LBL41:  DEC   BC
 525  D49F 69                   LD    L,C
 526  D4A0 60                   LD    H,B
 527  D4A1 22 57 D0             LD    (VAR2),HL
 528  D4A4 D1                   POP   DE
 529  D4A5 C9                   RET
 530  D4A6 D5           LBL42:  PUSH  DE
 531  D4A7 CD 00 DA             CALL  SUB39
 532  D4AA 2A 57 D0             LD    HL,(VAR2)
 533  D4AD 44                   LD    B,H
 534  D4AE 4D                   LD    C,L
 535  D4AF 19                   ADD   HL,DE
 536  D4B0 D1                   POP   DE
 537  D4B1 D5                   PUSH  DE
 538  D4B2 E5                   PUSH  HL
 539  D4B3 EB                   EX    DE,HL
 540  D4B4 2A 08 D0             LD    HL,(0D008H)
 541  D4B7 CD FA D9             CALL  SUB38
 542  D4BA DA 71 D6             JP    C,LBL71
 543  D4BD E1                   POP   HL
 544  D4BE D1                   POP   DE
 545  D4BF 22 57 D0             LD    (VAR2),HL
 546  D4C2 E5                   PUSH  HL
 547  D4C3 EB                   EX    DE,HL
 548  D4C4 CD 00 DA             CALL  SUB39
 549  D4C7 E3                   EX    (SP),HL
 550  D4C8 13                   INC   DE
 551  D4C9 7B           LBL43:  LD    A,E
 552  D4CA E6 FC                AND   0FCH          ; 252
 553  D4CC B2                   OR    D
 554  D4CD CA E7 D4             JP    Z,LBL44
 555  D4D0 0A                   LD    A,(BC)
 556  D4D1 77                   LD    (HL),A
 557  D4D2 2B                   DEC   HL
 558  D4D3 0B                   DEC   BC
 559  D4D4 1B                   DEC   DE
 560  D4D5 0A                   LD    A,(BC)
 561  D4D6 77                   LD    (HL),A
 562  D4D7 2B                   DEC   HL
 563  D4D8 0B                   DEC   BC
 564  D4D9 1B                   DEC   DE
 565  D4DA 0A                   LD    A,(BC)
 566  D4DB 77                   LD    (HL),A
 567  D4DC 2B                   DEC   HL
 568  D4DD 0B                   DEC   BC
 569  D4DE 1B                   DEC   DE
 570  D4DF 0A                   LD    A,(BC)
 571  D4E0 77                   LD    (HL),A
 572  D4E1 2B                   DEC   HL
 573  D4E2 0B                   DEC   BC
 574  D4E3 1B                   DEC   DE
 575  D4E4 C3 C9 D4             JP    LBL43
 576  D4E7 7B           LBL44:  LD    A,E
 577  D4E8 B7                   OR    A
 578  D4E9 CA F4 D4             JP    Z,LBL46
 579  D4EC 0A           LBL45:  LD    A,(BC)
 580  D4ED 77                   LD    (HL),A
 581  D4EE 2B                   DEC   HL
 582  D4EF 0B                   DEC   BC
 583  D4F0 1D                   DEC   E
 584  D4F1 C2 EC D4             JP    NZ,LBL45
 585  D4F4 D1           LBL46:  POP   DE
 586  D4F5 C9                   RET
 587  D4F6 CD E9 D9             CALL  SUB36
 588  D4F9 CA 29 D5             JP    Z,LBL51
 589  D4FC 21 01 00             LD    HL,0001H    ; 1
 590  D4FF CD D8 D3             CALL  SUB14
 591  D502 5D                   LD    E,L
 592  D503 21 63 D0             LD    HL,REF7             ; 53347
 593  D506 0E 03                LD    C,03H         ; 3
 594  D508 AF                   XOR   A
 595  D509 0D           LBL47:  DEC   C
 596  D50A CA 21 D5             JP    Z,LBL50
 597  D50D 86                   ADD   A,(HL)
 598  D50E BB                   CP    E
 599  D50F 23                   INC   HL
 600  D510 DA 09 D5             JP    C,LBL47
 601  D513 FE 3E        LBL48:  CP    3EH           ; 62 '>'; [2]
 602  D515 DA 1A D5             JP    C,LBL49
 603  D518 3E 3E                LD    A,3EH         ; 62 '>'
 604  D51A 6F           LBL49:  LD    L,A           ; [3]
 605  D51B 87                   ADD   A,A
 606  D51C 85                   ADD   A,L
 607  D51D 32 FD 8F             LD    (bios_vars.cursorY+1),A
 608  D520 C9                   RET
 609  D521 86           LBL50:  ADD   A,(HL)                ; [2]
 610  D522 BB                   CP    E
 611  D523 DA 21 D5             JP    C,LBL50
 612  D526 C3 13 D5             JP    LBL48
 613  D529 21 00 00     LBL51:  LD    HL,0000H
 614  D52C CD D8 D3             CALL  SUB14
 615  D52F 5D                   LD    E,L
 616  D530 21 63 D0             LD    HL,REF7             ; 53347
 617  D533 0E 03                LD    C,03H         ; 3
 618  D535 AF                   XOR   A
 619  D536 0D           LBL52:  DEC   C
 620  D537 CA 45 D5             JP    Z,LBL53
 621  D53A 86                   ADD   A,(HL)
 622  D53B BB                   CP    E
 623  D53C 23                   INC   HL
 624  D53D DA 36 D5             JP    C,LBL52
 625  D540 2B                   DEC   HL
 626  D541 96                   SUB   (HL)
 627  D542 C3 1A D5             JP    LBL49
 628  D545 86           LBL53:  ADD   A,(HL)                ; [2]
 629  D546 BB                   CP    E
 630  D547 DA 45 D5             JP    C,LBL53
 631  D54A 96                   SUB   (HL)
 632  D54B C3 1A D5             JP    LBL49
 633  D54E CD 17 D4     LBL54:  CALL  SUB15         ; [2]
 634  D551 2A 06 D0             LD    HL,(0D006H)
 635  D554 EB                   EX    DE,HL
 636  D555 2A 55 D0             LD    HL,(VAR1)
 637  D558 06 16                LD    B,16H         ; 22
 638  D55A CD FA D9     LBL55:  CALL  SUB38
 639  D55D CA 6C D5             JP    Z,LBL56
 640  D560 CD 19 D9             CALL  SUB35
 641  D563 E5                   PUSH  HL
 642  D564 CD 04 DB             CALL  SUB49
 643  D567 E1                   POP   HL
 644  D568 05                   DEC   B
 645  D569 C2 5A D5             JP    NZ,LBL55
 646  D56C 22 55 D0     LBL56:  LD    (VAR1),HL
 647  D56F CD 3D D2             CALL  SUB5
 648  D572 C9                   RET
 649  D573 CD 17 D4     LBL57:  CALL  SUB15
 650  D576 2A 55 D0             LD    HL,(VAR1)
 651  D579 01 19 16             LD    BC,1619H    ; 5657
 652  D57C 5D           LBL58:  LD    E,L
 653  D57D 54                   LD    D,H
 654  D57E CD 12 DA             CALL  SUB42
 655  D581 7E                   LD    A,(HL)
 656  D582 3C                   INC   A
 657  D583 C2 8B D5             JP    NZ,LBL59
 658  D586 6B                   LD    L,E
 659  D587 62                   LD    H,D
 660  D588 C3 97 D5             JP    LBL60
 661  D58B E5           LBL59:  PUSH  HL
 662  D58C CD EE DA             CALL  SUB48
 663  D58F CC 09 C8             CALL  Z,bios_printChar
 664  D592 E1                   POP   HL
 665  D593 05                   DEC   B
 666  D594 C2 7C D5             JP    NZ,LBL58
 667  D597 22 55 D0     LBL60:  LD    (VAR1),HL
 668  D59A CD 3D D2             CALL  SUB5
 669  D59D C9                   RET
 670  D59E CD EE DA     LBL61:  CALL  SUB48
 671  D5A1 C2 9E D5             JP    NZ,LBL61
 672  D5A4 2A 59 D0             LD    HL,(VAR3)
 673  D5A7 22 55 D0             LD    (VAR1),HL
 674  D5AA 3E 08                LD    A,08H         ; 8
 675  D5AC 32 FC 8F             LD    (bios_vars.cursorY),A
 676  D5AF C3 4E D5             JP    LBL54
 677  D5B2 21 65 D6             LD    HL,REF23    ; 54885
 678  D5B5 E5                   PUSH  HL
 679  D5B6 2A 5D D0             LD    HL,(VAR6)
 680  D5B9 7C                   LD    A,H
 681  D5BA B5                   OR    L
 682  D5BB C2 C4 D5             JP    NZ,LBL62
 683  D5BE CD D2 D5             CALL  SUB17
 684  D5C1 C3 D9 D5             JP    LBL63
 685  D5C4 EB           LBL62:  EX    DE,HL
 686  D5C5 2A 59 D0             LD    HL,(VAR3)
 687  D5C8 CD 12 DA             CALL  SUB42
 688  D5CB EB                   EX    DE,HL
 689  D5CC CD FA D9             CALL  SUB38
 690  D5CF DA D9 D5             JP    C,LBL63
 691  D5D2 2A 59 D0     SUB17:  LD    HL,(VAR3)
 692  D5D5 22 5D D0             LD    (VAR6),HL
 693  D5D8 C9                   RET
 694  D5D9 2A 59 D0     LBL63:  LD    HL,(VAR3)   ; [2]
 695  D5DC CD 12 DA             CALL  SUB42
 696  D5DF 22 5F D0             LD    (VAR7),HL
 697  D5E2 C9                   RET
 698  D5E3 2A 5D D0             LD    HL,(VAR6)
 699  D5E6 7D                   LD    A,L
 700  D5E7 B4                   OR    H
 701  D5E8 CA 07 DA             JP    Z,SUB40
 702  D5EB EB                   EX    DE,HL
 703  D5EC 2A 59 D0             LD    HL,(VAR3)
 704  D5EF CD C7 D2     LBL64:  CALL  SUB8
 705  D5F2 D2 FB D5             JP    NC,LBL65
 706  D5F5 CD 19 D9             CALL  SUB35
 707  D5F8 C2 EF D5             JP    NZ,LBL64
 708  D5FB 22 59 D0     LBL65:  LD    (VAR3),HL
 709  D5FE 21 00 00             LD    HL,0000H
 710  D601 22 5D D0             LD    (VAR6),HL
 711  D604 2A 5F D0             LD    HL,(VAR7)
 712  D607 D5           LBL66:  PUSH  DE
 713  D608 CD 00 DA             CALL  SUB39
 714  D60B 42                   LD    B,D
 715  D60C 4B                   LD    C,E
 716  D60D EB                   EX    DE,HL
 717  D60E 2A 55 D0             LD    HL,(VAR1)
 718  D611 CD FA D9             CALL  SUB38
 719  D614 DA 1B D6             JP    C,LBL67
 720  D617 09                   ADD   HL,BC
 721  D618 22 55 D0             LD    (VAR1),HL
 722  D61B 2A 59 D0     LBL67:  LD    HL,(VAR3)
 723  D61E CD FA D9             CALL  SUB38
 724  D621 DA 28 D6             JP    C,LBL68
 725  D624 09                   ADD   HL,BC
 726  D625 22 59 D0             LD    (VAR3),HL
 727  D628 EB           LBL68:  EX    DE,HL
 728  D629 D1                   POP   DE
 729  D62A CD 49 D4             CALL  SUB16
 730  D62D CD 6B DB             CALL  SUB52
 731  D630 3A FC 8F             LD    A,(bios_vars.cursorY)
 732  D633 D6 08                SUB   08H           ; 8
 733  D635 47                   LD    B,A
 734  D636 CA 46 D6             JP    Z,LBL70
 735  D639 CD 19 D9     LBL69:  CALL  SUB35
 736  D63C CC 4C D6             CALL  Z,SUB18
 737  D63F 78                   LD    A,B
 738  D640 D6 0A                SUB   0AH           ; 10
 739  D642 47                   LD    B,A
 740  D643 C2 39 D6             JP    NZ,LBL69
 741  D646 22 55 D0     LBL70:  LD    (VAR1),HL
 742  D649 C3 3D D2             JP    SUB5
 743  D64C E5           SUB18:  PUSH  HL
 744  D64D CD EE DA             CALL  SUB48
 745  D650 E1                   POP   HL
 746  D651 C0                   RET   NZ
 747  D652 0E 19                LD    C,19H         ; 25
 748  D654 C3 09 C8             JP    bios_printChar
 749  D657 2A 5D D0             LD    HL,(VAR6)
 750  D65A 11 00 00             LD    DE,0000H
 751  D65D CD FA D9             CALL  SUB38
 752  D660 C8                   RET   Z
 753  D661 EB                   EX    DE,HL
 754  D662 22 5D D0             LD    (VAR6),HL
 755  D665 CD 1D DA     REF23:  CALL  SUB43
 756  D668 2A 55 D0             LD    HL,(VAR1)
 757  D66B CD 1F D2             CALL  SUB3
 758  D66E C3 26 DA             JP    SUB44
 759  D671 21 67 D0     LBL71:  LD    HL,REF8             ; 53351; [2]
 760  D674 CD 18 C8             CALL  bios_printString
 761  D677 CD 07 DA             CALL  SUB40
 762  D67A CD 03 C8             CALL  bios_getch
 763  D67D C3 D8 D0             JP    LBL5
 764  D680 21 7A D0             LD    HL,REF9             ; 53370
 765  D683 CD 18 C8             CALL  bios_printString
 766  D686 CD 1B D8             CALL  SUB33
 767  D689 C2 09 D2             JP    NZ,SUB1
 768  D68C 2A 06 D0             LD    HL,(0D006H)
 769  D68F CD 0A D8             CALL  SUB32
 770  D692 C5                   PUSH  BC
 771  D693 D5                   PUSH  DE
 772  D694 CD E2 D6             CALL  SUB19
 773  D697 E3                   EX    (SP),HL
 774  D698 EB                   EX    DE,HL
 775  D699 21 0A D0             LD    HL,LBL2             ; 53258
 776  D69C 3E E6                LD    A,0E6H                ; 230
 777  D69E 06 05                LD    B,05H         ; 5
 778  D6A0 CD 0C D7     LBL72:  CALL  SUB24
 779  D6A3 05                   DEC   B
 780  D6A4 C2 A0 D6             JP    NZ,LBL72
 781  D6A7 7E           LBL73:  LD    A,(HL)
 782  D6A8 CD 0C D7             CALL  SUB24
 783  D6AB B7                   OR    A
 784  D6AC CA B3 D6             JP    Z,LBL74
 785  D6AF 23                   INC   HL
 786  D6B0 C3 A7 D6             JP    LBL73
 787  D6B3 CD F1 D6     LBL74:  CALL  SUB20
 788  D6B6 D1                   POP   DE
 789  D6B7 3A 06 D0             LD    A,(0D006H)
 790  D6BA 2F                   cpl
 791  D6BB 3C                   INC   A
 792  D6BC 6F                   LD    L,A
 793  D6BD 3A 07 D0             LD    A,(0D007H)
 794  D6C0 2F                   cpl
 795  D6C1 3C                   INC   A
 796  D6C2 67                   LD    H,A
 797  D6C3 19                   ADD   HL,DE
 798  D6C4 3E E6                LD    A,0E6H                ; 230
 799  D6C6 CD 0C D7             CALL  SUB24
 800  D6C9 7D                   LD    A,L
 801  D6CA 2F                   cpl
 802  D6CB CD 0C D7             CALL  SUB24
 803  D6CE 7C                   LD    A,H
 804  D6CF 2F                   cpl
 805  D6D0 2A 06 D0             LD    HL,(0D006H)
 806  D6D3 CD FE D6             CALL  SUB23
 807  D6D6 C1                   POP   BC
 808  D6D7 79                   LD    A,C
 809  D6D8 CD 0C D7             CALL  SUB24
 810  D6DB 78                   LD    A,B
 811  D6DC CD 0C D7             CALL  SUB24
 812  D6DF C3 09 D2             JP    SUB1
 813  D6E2 16 04        SUB19:  LD    D,04H         ; 4
 814  D6E4 AF                   XOR   A
 815  D6E5 1E 40        LBL75:  LD    E,40H         ; 64 '@'
 816  D6E7 EE 55                XOR   55H           ; 85 'U'
 817  D6E9 CD F6 D6             CALL  SUB22
 818  D6EC 15                   DEC   D
 819  D6ED C2 E5 D6             JP    NZ,LBL75
 820  D6F0 C9                   RET
 821  D6F1 CD F4 D6     SUB20:  CALL  SUB21
 822  D6F4 AF           SUB21:  XOR   A
 823  D6F5 5F                   LD    E,A
 824  D6F6 CD 0C D7     SUB22:  CALL  SUB24         ; [2]
 825  D6F9 1D                   DEC   E
 826  D6FA C2 F6 D6             JP    NZ,SUB22
 827  D6FD C9                   RET
 828  D6FE CD 0C D7     SUB23:  CALL  SUB24         ; [2]
 829  D701 CD FA D9             CALL  SUB38
 830  D704 7E                   LD    A,(HL)
 831  D705 23                   INC   HL
 832  D706 C2 FE D6             JP    NZ,SUB23
 833  D709 C3 0C D7             JP    SUB24
 834  D70C 4F           SUB24:  LD    C,A           ; [9]
 835  D70D C3 0C C8             JP    bios_tapeWrite
 836  D710 06 00                LD    B,00H
 837  D712 78           LBL76:  LD    A,B           ; [2]
 838  D713 32 66 D0             LD    (VAR9),A
 839  D716 21 00 00             LD    HL,0000H
 840  D719 22 5D D0             LD    (VAR6),HL
 841  D71C 21 7A D0             LD    HL,REF9             ; 53370
 842  D71F CD 18 C8             CALL  bios_printString
 843  D722 CD 1B D8             CALL  SUB33
 844  D725 C2 09 D2             JP    NZ,SUB1
 845  D728 CD D5 D7             CALL  SUB31
 846  D72B E5                   PUSH  HL
 847  D72C CD D0 D7     LBL77:  CALL  SUB30
 848  D72F 47                   LD    B,A
 849  D730 3A 66 D0             LD    A,(VAR9)
 850  D733 3C                   INC   A
 851  D734 C2 3C D7             JP    NZ,LBL78
 852  D737 78                   LD    A,B
 853  D738 BE                   CP    (HL)
 854  D739 C2 5C D7             JP    NZ,LBL79
 855  D73C 70           LBL78:  LD    (HL),B
 856  D73D 23                   INC   HL
 857  D73E 04                   INC   B
 858  D73F C2 2C D7             JP    NZ,LBL77
 859  D742 3E 08                LD    A,08H         ; 8
 860  D744 CD B0 D7             CALL  SUB28
 861  D747 E1                   POP   HL
 862  D748 C5                   PUSH  BC
 863  D749 CD 0A D8             CALL  SUB32
 864  D74C E3                   EX    (SP),HL
 865  D74D 50                   LD    D,B
 866  D74E 59                   LD    E,C
 867  D74F CD FA D9             CALL  SUB38
 868  D752 C2 5C D7             JP    NZ,LBL79
 869  D755 E1                   POP   HL
 870  D756 22 57 D0             LD    (VAR2),HL
 871  D759 C3 FA D1             JP    LBL13
 872  D75C E1           LBL79:  POP   HL            ; [2]
 873  D75D 21 88 D0             LD    HL,REF12    ; 53384
 874  D760 CD 18 C8             CALL  bios_printString
 875  D763 CD 07 DA             CALL  SUB40
 876  D766 CD 03 C8             CALL  bios_getch
 877  D769 2A 57 D0             LD    HL,(VAR2)
 878  D76C 36 FF                LD    (HL),0FFH   ; 255
 879  D76E C3 FA D1             JP    LBL13
 880  D771 21 1A D0     SUB25:  LD    HL,0D01AH   ; 53274
 881  D774 CD BD D7             CALL  SUB29
 882  D777 CD D0 D7     LBL80:  CALL  SUB30
 883  D77A 77                   LD    (HL),A
 884  D77B B7                   OR    A
 885  D77C CA 83 D7             JP    Z,LBL81
 886  D77F 23                   INC   HL
 887  D780 C3 77 D7             JP    LBL80
 888  D783 21 7B D0     LBL81:  LD    HL,REF10    ; 53371
 889  D786 CD 18 C8             CALL  bios_printString
 890  D789 21 1A D0             LD    HL,0D01AH   ; 53274
 891  D78C E5                   PUSH  HL
 892  D78D CD 18 C8             CALL  bios_printString
 893  D790 CD A1 D7             CALL  SUB26
 894  D793 E1                   POP   HL
 895  D794 11 0A D0             LD    DE,LBL2             ; 53258
 896  D797 1A           LBL82:  LD    A,(DE)
 897  D798 B7                   OR    A
 898  D799 C8                   RET   Z
 899  D79A BE                   CP    (HL)
 900  D79B 23                   INC   HL
 901  D79C 13                   INC   DE
 902  D79D CA 97 D7             JP    Z,LBL82
 903  D7A0 C9                   RET
 904  D7A1 21 00 00     SUB26:  LD    HL,0000H
 905  D7A4 5D                   LD    E,L
 906  D7A5 54                   LD    D,H
 907  D7A6 2B           LBL83:  DEC   HL
 908  D7A7 CD FA D9             CALL  SUB38
 909  D7AA C8                   RET   Z
 910  D7AB C3 A6 D7             JP    LBL83
 911  D7AE 3E FF        SUB27:  LD    A,0FFH                ; 255
 912  D7B0 CD 06 C8     SUB28:  CALL  bios_tapeRead
 913  D7B3 4F                   LD    C,A
 914  D7B4 CD D0 D7             CALL  SUB30
 915  D7B7 47                   LD    B,A
 916  D7B8 C9                   RET
 917  D7B9 AF           LBL84:  XOR   A
 918  D7BA 32 F3 8F             LD    (bios_vars.tapeInverse),A
 919  D7BD 06 04        SUB29:  LD    B,04H         ; 4
 920  D7BF 3E FF                LD    A,0FFH                ; 255
 921  D7C1 CD 06 C8     LBL85:  CALL  bios_tapeRead
 922  D7C4 FE E6                CP    0E6H          ; 230
 923  D7C6 C2 B9 D7             JP    NZ,LBL84
 924  D7C9 05                   DEC   B
 925  D7CA 3E 08                LD    A,08H         ; 8
 926  D7CC C2 C1 D7             JP    NZ,LBL85
 927  D7CF C9                   RET
 928  D7D0 3E 08        SUB30:  LD    A,08H         ; 8; [3]
 929  D7D2 C3 06 C8             JP    bios_tapeRead
 930  D7D5 CD 71 D7     SUB31:  CALL  SUB25         ; [2]
 931  D7D8 C2 D5 D7             JP    NZ,SUB31
 932  D7DB CD AE D7             CALL  SUB27
 933  D7DE 2A 06 D0             LD    HL,(0D006H)
 934  D7E1 3A 66 D0             LD    A,(VAR9)
 935  D7E4 3D                   DEC   A
 936  D7E5 FA EB D7             JP    M,LBL86
 937  D7E8 2A 57 D0             LD    HL,(VAR2)
 938  D7EB 78           LBL86:  LD    A,B
 939  D7EC 2F                   cpl
 940  D7ED 47                   LD    B,A
 941  D7EE 79                   LD    A,C
 942  D7EF 2F                   cpl
 943  D7F0 4F                   LD    C,A
 944  D7F1 E5                   PUSH  HL
 945  D7F2 EB                   EX    DE,HL
 946  D7F3 2A 08 D0             LD    HL,(0D008H)
 947  D7F6 EB                   EX    DE,HL
 948  D7F7 09                   ADD   HL,BC
 949  D7F8 CD FA D9             CALL  SUB38
 950  D7FB E1                   POP   HL
 951  D7FC D8                   RET   C
 952  D7FD C3 71 D6             JP    LBL71
 953  D800 06 FF                LD    B,0FFH                ; 255
 954  D802 C3 12 D7             JP    LBL76
 955  D805 06 01                LD    B,01H         ; 1
 956  D807 C3 12 D7             JP    LBL76
 957  D80A 01 00 00     SUB32:  LD    BC,0000H    ; [2]
 958  D80D 7E           LBL87:  LD    A,(HL)
 959  D80E FE FF                CP    0FFH          ; 255
 960  D810 C8                   RET   Z
 961  D811 81                   ADD   A,C
 962  D812 4F                   LD    C,A
 963  D813 3E 00                LD    A,00H
 964  D815 88                   ADC   A,B
 965  D816 47                   LD    B,A
 966  D817 23                   INC   HL
 967  D818 C3 0D D8             JP    LBL87
 968  D81B 06 30        SUB33:  LD    B,30H         ; 48 '0'; [2]
 969  D81D 21 0A D0             LD    HL,LBL2             ; 53258
 970  D820 5D                   LD    E,L
 971  D821 54                   LD    D,H
 972  D822 CD 03 C8     LBL88:  CALL  bios_getch          ; [5]
 973  D825 FE 20        SUB34:  CP    20H           ; 32 ' '
 974  D827 DA 44 D8             JP    C,LBL90
 975  D82A 05                   DEC   B
 976  D82B C2 32 D8             JP    NZ,LBL89
 977  D82E 04                   INC   B
 978  D82F C3 22 D8             JP    LBL88
 979  D832 4F           LBL89:  LD    C,A
 980  D833 CD 09 C8             CALL  bios_printChar
 981  D836 77                   LD    (HL),A
 982  D837 23                   INC   HL
 983  D838 C3 22 D8             JP    LBL88
 984  D83B 01 20 2A             LD    BC,2A20H    ; 10784
 985  D83E CD 0E D3             CALL  SUB9
 986  D841 C3 0A DA             JP    SUB41
 987  D844 FE 1F        LBL90:  CP    1FH           ; 31
 988  D846 C2 4B D8             JP    NZ,LBL91
 989  D849 B7                   OR    A
 990  D84A C9                   RET
 991  D84B FE 08        LBL91:  CP    08H           ; 8
 992  D84D C2 63 D8             JP    NZ,LBL92
 993  D850 CD FA D9             CALL  SUB38
 994  D853 CA 22 D8             JP    Z,LBL88
 995  D856 E5                   PUSH  HL
 996  D857 21 84 D0             LD    HL,REF11    ; 53380
 997  D85A CD 18 C8             CALL  bios_printString
 998  D85D E1                   POP   HL
 999  D85E 2B                   DEC   HL
1000  D85F 04                   INC   B
1001  D860 C3 22 D8             JP    LBL88
1002  D863 FE 0D        LBL92:  CP    0DH           ; 13
1003  D865 C2 22 D8             JP    NZ,LBL88
1004  D868 AF                   XOR   A
1005  D869 77                   LD    (HL),A
1006  D86A C9                   RET
1007  D86B CD 17 D4             CALL  SUB15
1008  D86E 21 F9 06             LD    HL,06F9H    ; 1785
1009  D871 22 FC 8F             LD    (bios_vars.cursorY),HL
1010  D874 CD 59 DC             CALL  SUB56
1011  D877 21 93 D0             LD    HL,REF13    ; 53395
1012  D87A CD 18 C8             CALL  bios_printString
1013  D87D 21 F9 1E             LD    HL,1EF9H    ; 7929
1014  D880 22 FC 8F             LD    (bios_vars.cursorY),HL
1015  D883 CD 03 C8             CALL  bios_getch
1016  D886 FE 0D                CP    0DH           ; 13
1017  D888 CA A6 D8             JP    Z,LBL93
1018  D88B 01 20 10             LD    BC,1020H    ; 4128
1019  D88E CD 0A DA             CALL  SUB41
1020  D891 22 FC 8F             LD    (bios_vars.cursorY),HL
1021  D894 21 9B D0             LD    HL,REF14    ; 53403
1022  D897 5D                   LD    E,L
1023  D898 54                   LD    D,H
1024  D899 06 0F                LD    B,0FH         ; 15
1025  D89B CD 25 D8             CALL  SUB34
1026  D89E F5                   PUSH  AF
1027  D89F CD 62 DC             CALL  SUB57
1028  D8A2 F1                   POP   AF
1029  D8A3 C2 09 D2             JP    NZ,SUB1
1030  D8A6 CD 62 DC     LBL93:  CALL  SUB57
1031  D8A9 2A 55 D0             LD    HL,(VAR1)
1032  D8AC CD 12 DA             CALL  SUB42
1033  D8AF 11 9B D0     LBL94:  LD    DE,REF14    ; 53403
1034  D8B2 46           LBL95:  LD    B,(HL)
1035  D8B3 1A                   LD    A,(DE)
1036  D8B4 B7                   OR    A
1037  D8B5 CA C8 D8             JP    Z,LBL96
1038  D8B8 B8                   CP    B
1039  D8B9 23                   INC   HL
1040  D8BA 13                   INC   DE
1041  D8BB CA B2 D8             JP    Z,LBL95
1042  D8BE 04                   INC   B
1043  D8BF C2 AF D8             JP    NZ,LBL94
1044  D8C2 CD 07 DA             CALL  SUB40
1045  D8C5 C3 FA D1             JP    LBL13
1046  D8C8 CD 19 D9     LBL96:  CALL  SUB35
1047  D8CB 22 55 D0             LD    (VAR1),HL
1048  D8CE 22 59 D0             LD    (VAR3),HL
1049  D8D1 CD 6B DB             CALL  SUB52
1050  D8D4 C3 09 D2             JP    SUB1
1051  D8D7 CD 51 D3             CALL  SUB12
1052  D8DA CD 45 D3             CALL  SUB10
1053  D8DD 2A 59 D0             LD    HL,(VAR3)
1054  D8E0 CD 12 DA             CALL  SUB42
1055  D8E3 7E                   LD    A,(HL)
1056  D8E4 3C                   INC   A
1057  D8E5 C8                   RET   Z
1058  D8E6 2B                   DEC   HL
1059  D8E7 36 20                LD    (HL),20H    ; 32 ' '
1060  D8E9 23                   INC   HL
1061  D8EA 4D                   LD    C,L
1062  D8EB 44                   LD    B,H
1063  D8EC 21 47 D0             LD    HL,REF3             ; 53319
1064  D8EF CD FA D9     LBL97:  CALL  SUB38
1065  D8F2 DA 3A D2             JP    C,LBL15
1066  D8F5 0A                   LD    A,(BC)
1067  D8F6 FE 0D                CP    0DH           ; 13
1068  D8F8 CA 3A D2             JP    Z,LBL15
1069  D8FB FE FF                CP    0FFH          ; 255
1070  D8FD CA 3A D2             JP    Z,LBL15
1071  D900 12                   LD    (DE),A
1072  D901 13                   INC   DE
1073  D902 03                   INC   BC
1074  D903 C3 EF D8             JP    LBL97
1075  D906 2A 59 D0             LD    HL,(VAR3)
1076  D909 CD D8 D3             CALL  SUB14
1077  D90C 5D                   LD    E,L
1078  D90D 54                   LD    D,H
1079  D90E 13                   INC   DE
1080  D90F E5                   PUSH  HL
1081  D910 CD 49 D4             CALL  SUB16
1082  D913 E1                   POP   HL
1083  D914 36 0D                LD    (HL),0DH    ; 13
1084  D916 C3 3D D2             JP    SUB5
1085  D919 D5           SUB35:  PUSH  DE            ; [6]
1086  D91A EB                   EX    DE,HL
1087  D91B 2A 06 D0             LD    HL,(0D006H)
1088  D91E EB                   EX    DE,HL
1089  D91F CD FA D9             CALL  SUB38
1090  D922 CA 3D D9             JP    Z,LBL101
1091  D925 2B                   DEC   HL
1092  D926 CD FA D9             CALL  SUB38
1093  D929 CA 3B D9             JP    Z,LBL100
1094  D92C 2B                   DEC   HL
1095  D92D 7E           LBL98:  LD    A,(HL)
1096  D92E FE 0D                CP    0DH           ; 13
1097  D930 CA 3A D9             JP    Z,LBL99
1098  D933 CD FA D9             CALL  SUB38
1099  D936 2B                   DEC   HL
1100  D937 C2 2D D9             JP    NZ,LBL98
1101  D93A 23           LBL99:  INC   HL
1102  D93B AF           LBL100:  XOR   A
1103  D93C 3C                   INC   A
1104  D93D D1           LBL101:  POP   DE
1105  D93E C9                   RET
1106  D93F 2A 5F D0             LD    HL,(VAR7)
1107  D942 EB                   EX    DE,HL
1108  D943 2A 5D D0             LD    HL,(VAR6)
1109  D946 7C                   LD    A,H
1110  D947 B5                   OR    L
1111  D948 CA 07 DA             JP    Z,SUB40
1112  D94B CD 00 DA             CALL  SUB39
1113  D94E 2A 59 D0             LD    HL,(VAR3)
1114  D951 CD C7 D2             CALL  SUB8
1115  D954 F5                   PUSH  AF
1116  D955 CD 12 DA             CALL  SUB42
1117  D958 F1                   POP   AF
1118  D959 DC C7 D2             CALL  C,SUB8
1119  D95C DA 07 DA             JP    C,SUB40
1120  D95F E5                   PUSH  HL
1121  D960 EB                   EX    DE,HL
1122  D961 19                   ADD   HL,DE
1123  D962 EB                   EX    DE,HL
1124  D963 CD 49 D4             CALL  SUB16
1125  D966 2A 5D D0             LD    HL,(VAR6)
1126  D969 4D                   LD    C,L
1127  D96A 44                   LD    B,H
1128  D96B E1                   POP   HL
1129  D96C CD EF D9             CALL  SUB37
1130  D96F C3 3D D2             JP    SUB5
1131  D972 2A 5F D0             LD    HL,(VAR7)
1132  D975 EB                   EX    DE,HL
1133  D976 2A 5D D0             LD    HL,(VAR6)
1134  D979 7C                   LD    A,H
1135  D97A B5                   OR    L
1136  D97B CA 07 DA             JP    Z,SUB40
1137  D97E CD 00 DA             CALL  SUB39
1138  D981 2A 59 D0             LD    HL,(VAR3)
1139  D984 CD C7 D2             CALL  SUB8
1140  D987 DA 07 DA             JP    C,SUB40
1141  D98A CD 12 DA             CALL  SUB42
1142  D98D E5                   PUSH  HL
1143  D98E EB                   EX    DE,HL
1144  D98F 19                   ADD   HL,DE
1145  D990 EB                   EX    DE,HL
1146  D991 C1                   POP   BC
1147  D992 D5                   PUSH  DE
1148  D993 E5                   PUSH  HL
1149  D994 C5                   PUSH  BC
1150  D995 CD 49 D4             CALL  SUB16
1151  D998 2A 5D D0             LD    HL,(VAR6)
1152  D99B 4D                   LD    C,L
1153  D99C 44                   LD    B,H
1154  D99D E1                   POP   HL
1155  D99E CD EF D9             CALL  SUB37
1156  D9A1 2A 5D D0             LD    HL,(VAR6)
1157  D9A4 EB                   EX    DE,HL
1158  D9A5 E1                   POP   HL
1159  D9A6 22 5D D0             LD    (VAR6),HL
1160  D9A9 2A 5F D0             LD    HL,(VAR7)
1161  D9AC E3                   EX    (SP),HL
1162  D9AD 22 5F D0             LD    (VAR7),HL
1163  D9B0 E1                   POP   HL
1164  D9B1 C3 07 D6             JP    LBL66
1165  D9B4 21 AB D0             LD    HL,REF15    ; 53419
1166  D9B7 CD 18 C8             CALL  bios_printString
1167  D9BA CD 03 C8             CALL  bios_getch
1168  D9BD FE 59                CP    59H           ; 89 'Y'
1169  D9BF C2 09 D2             JP    NZ,SUB1
1170  D9C2 2A 06 D0             LD    HL,(0D006H)
1171  D9C5 36 0D                LD    (HL),0DH    ; 13
1172  D9C7 23                   INC   HL
1173  D9C8 36 FF                LD    (HL),0FFH   ; 255
1174  D9CA 22 57 D0             LD    (VAR2),HL
1175  D9CD C3 FA D1             JP    LBL13
1176  D9D0 AF           LBL102:  XOR   A
1177  D9D1 32 5B D0             LD    (VAR4),A
1178  D9D4 CD 1D DA             CALL  SUB43
1179  D9D7 CD 0E D3             CALL  SUB9
1180  D9DA 01 20 3F             LD    BC,3F20H    ; 16160
1181  D9DD CD 0A DA             CALL  SUB41
1182  D9E0 2A 59 D0             LD    HL,(VAR3)
1183  D9E3 CD 99 D2             CALL  SUB7
1184  D9E6 C3 26 DA             JP    SUB44
1185  D9E9 3A E1 FF     SUB36:  LD    A,(IO_KEYB_B)  ; [3]
1186  D9EC E6 02                AND   02H           ; 2
1187  D9EE C9                   RET
1188  D9EF 0A           SUB37:  LD    A,(BC)                ; [5]
1189  D9F0 77                   LD    (HL),A
1190  D9F1 23                   INC   HL
1191  D9F2 03                   INC   BC
1192  D9F3 CD FA D9             CALL  SUB38
1193  D9F6 C2 EF D9             JP    NZ,SUB37
1194  D9F9 C9                   RET
1195  D9FA 7C           SUB38:  LD    A,H           ; [34]
1196  D9FB BA                   CP    D
1197  D9FC C0                   RET   NZ
1198  D9FD 7D                   LD    A,L
1199  D9FE BB                   CP    E
1200  D9FF C9                   RET
1201  DA00 7B           SUB39:  LD    A,E           ; [9]
1202  DA01 95                   SUB   L
1203  DA02 5F                   LD    E,A
1204  DA03 7A                   LD    A,D
1205  DA04 9C                   SBC   A,H
1206  DA05 57                   LD    D,A
1207  DA06 C9                   RET
1208  DA07 01 07 04     SUB40:  LD    BC,0407H    ; 1031; [11]
1209  DA0A CD 09 C8     SUB41:  CALL  bios_printChar            ; [5]
1210  DA0D 05                   DEC   B
1211  DA0E C2 0A DA             JP    NZ,SUB41
1212  DA11 C9                   RET
1213  DA12 7E           SUB42:  LD    A,(HL)                ; [11]
1214  DA13 FE FF                CP    0FFH          ; 255
1215  DA15 C8                   RET   Z
1216  DA16 FE 0D                CP    0DH           ; 13
1217  DA18 23                   INC   HL
1218  DA19 C2 12 DA             JP    NZ,SUB42
1219  DA1C C9                   RET
1220  DA1D E5           SUB43:  PUSH  HL            ; [7]
1221  DA1E 2A FC 8F             LD    HL,(bios_vars.cursorY)
1222  DA21 22 28 DA             LD    (SMC2+1),HL
1223  DA24 E1                   POP   HL
1224  DA25 C9                   RET
1225  DA26 E5           SUB44:  PUSH  HL            ; [7]
1226  DA27 21 00 00     SMC2:   LD    HL,0000H
1227  DA2A 22 FC 8F             LD    (bios_vars.cursorY),HL
1228  DA2D E1                   POP   HL
1229  DA2E C9                   RET
1230  DA2F CD CB DB     LBL103: CALL  SUB54
1231  DA32 CD 19 D9             CALL  SUB35
1232  DA35 22 59 D0             LD    (VAR3),HL
1233  DA38 22 55 D0             LD    (VAR1),HL
1234  DA3B CD 6B DB             CALL  SUB52
1235  DA3E CD 88 DB             CALL  SUB53
1236  DA41 CD 1F D2             CALL  SUB3
1237  DA44 CD 03 C8             CALL  bios_getch
1238  DA47 F5                   PUSH  AF
1239  DA48 21 F9 06             LD    HL,06F9H    ; 1785
1240  DA4B 22 FC 8F             LD    (bios_vars.cursorY),HL
1241  DA4E 01 20 30             LD    BC,3020H    ; 12320
1242  DA51 CD 0A DA             CALL  SUB41
1243  DA54 CD 32 D2             CALL  SUB4
1244  DA57 F1                   POP   AF
1245  DA58 21 1F D1             LD    HL,REF21    ; 53535
1246  DA5B E5                   PUSH  HL
1247  DA5C C3 52 D1             JP    LBL11
1248  DA5F 26 90        SUB45:  LD    H,90H         ; 144
1249  DA61 54                   LD    D,H
1250  DA62 0E 39        LBL104: LD    C,39H         ; 57 '9'
1251  DA64 2E 01                LD    L,01H         ; 1
1252  DA66 1E 0B                LD    E,0BH         ; 11
1253  DA68 1A           LBL105: LD    A,(DE)
1254  DA69 77                   LD    (HL),A
1255  DA6A 23                   INC   HL
1256  DA6B 13                   INC   DE
1257  DA6C 1A                   LD    A,(DE)
1258  DA6D 77                   LD    (HL),A
1259  DA6E 23                   INC   HL
1260  DA6F 13                   INC   DE
1261  DA70 1A                   LD    A,(DE)
1262  DA71 77                   LD    (HL),A
1263  DA72 23                   INC   HL
1264  DA73 13                   INC   DE
1265  DA74 1A                   LD    A,(DE)
1266  DA75 77                   LD    (HL),A
1267  DA76 23                   INC   HL
1268  DA77 13                   INC   DE
1269  DA78 0D                   DEC   C
1270  DA79 C2 68 DA             JP    NZ,LBL105
1271  DA7C 0E 0A                LD    C,0AH         ; 10
1272  DA7E AF                   XOR   A
1273  DA7F 77           LBL106: LD    (HL),A
1274  DA80 23                   INC   HL
1275  DA81 0D                   DEC   C
1276  DA82 C2 7F DA             JP    NZ,LBL106
1277  DA85 7C                   LD    A,H
1278  DA86 FE BF                CP    0BFH          ; 191
1279  DA88 C8                   RET   Z
1280  DA89 24                   INC   H
1281  DA8A 14                   INC   D
1282  DA8B C3 62 DA             JP    LBL104
1283  DA8E 3A FC 8F     SUB46:  LD    A,(bios_vars.cursorY)  ; [2]
1284  DA91 6F                   LD    L,A
1285  DA92 3E EE                LD    A,0EEH                ; 238
1286  DA94 95                   SUB   L
1287  DA95 B7                   OR    A
1288  DA96 1F                   rra
1289  DA97 32 A4 DA             LD    (SMC3+1),A
1290  DA9A 26 BF                LD    H,0BFH                ; 191
1291  DA9C 54                   LD    D,H
1292  DA9D 06 30                LD    B,30H         ; 48 '0'
1293  DA9F 2E EF        LBL107: LD    L,0EFH                ; 239
1294  DAA1 1E E5                LD    E,0E5H                ; 229
1295  DAA3 3E 00        SMC3:   LD    A,00H
1296  DAA5 4F                   LD    C,A
1297  DAA6 B7                   OR    A
1298  DAA7 CA B6 DA             JP    Z,LBL109
1299  DAAA 1A           LBL108: LD    A,(DE)
1300  DAAB 77                   LD    (HL),A
1301  DAAC 2B                   DEC   HL
1302  DAAD 1B                   DEC   DE
1303  DAAE 1A                   LD    A,(DE)
1304  DAAF 77                   LD    (HL),A
1305  DAB0 2B                   DEC   HL
1306  DAB1 1B                   DEC   DE
1307  DAB2 0D                   DEC   C
1308  DAB3 C2 AA DA             JP    NZ,LBL108
1309  DAB6 0E 09        LBL109: LD    C,09H         ; 9
1310  DAB8 AF                   XOR   A
1311  DAB9 77           LBL110: LD    (HL),A
1312  DABA 2B                   DEC   HL
1313  DABB 1B                   DEC   DE
1314  DABC 0D                   DEC   C
1315  DABD C2 B9 DA             JP    NZ,LBL110
1316  DAC0 25                   DEC   H
1317  DAC1 54                   LD    D,H
1318  DAC2 05                   DEC   B
1319  DAC3 C2 9F DA             JP    NZ,LBL107
1320  DAC6 C9                   RET
1321  DAC7 E5           SUB47:  PUSH  HL            ; [2]
1322  DAC8 2A FC 8F             LD    HL,(bios_vars.cursorY)
1323  DACB E5                   PUSH  HL
1324  DACC CD 59 DC             CALL  SUB56
1325  DACF 21 F9 9D             LD    HL,9DF9H    ; 40441
1326  DAD2 22 FC 8F             LD    (bios_vars.cursorY),HL
1327  DAD5 3A 5C D0             LD    A,(VAR5)
1328  DAD8 B7                   OR    A
1329  DAD9 21 B4 D0             LD    HL,REF16    ; 53428
1330  DADC C2 E2 DA             JP    NZ,LBL111
1331  DADF 21 BE D0             LD    HL,REF17    ; 53438
1332  DAE2 CD 18 C8     LBL111: CALL  bios_printString
1333  DAE5 CD 62 DC             CALL  SUB57
1334  DAE8 E1                   POP   HL
1335  DAE9 22 FC 8F             LD    (bios_vars.cursorY),HL
1336  DAEC E1                   POP   HL
1337  DAED C9                   RET
1338  DAEE 2A 59 D0     SUB48:  LD    HL,(VAR3)   ; [5]
1339  DAF1 CD 12 DA             CALL  SUB42
1340  DAF4 7E                   LD    A,(HL)
1341  DAF5 3C                   INC   A
1342  DAF6 C8                   RET   Z
1343  DAF7 22 59 D0             LD    (VAR3),HL
1344  DAFA 2A 61 D0             LD    HL,(VAR8)
1345  DAFD 23                   INC   HL
1346  DAFE 22 61 D0             LD    (VAR8),HL
1347  DB01 AF                   XOR   A
1348  DB02 3C                   INC   A
1349  DB03 C9                   RET
1350  DB04 2A 59 D0     SUB49:  LD    HL,(VAR3)   ; [3]
1351  DB07 CD 19 D9             CALL  SUB35
1352  DB0A C8                   RET   Z
1353  DB0B 22 59 D0             LD    (VAR3),HL
1354  DB0E 2A 61 D0             LD    HL,(VAR8)
1355  DB11 2B                   DEC   HL
1356  DB12 22 61 D0             LD    (VAR8),HL
1357  DB15 C9                   RET
1358  DB16 D5           SUB50:  PUSH  DE            ; [3]
1359  DB17 C5                   PUSH  BC
1360  DB18 E5                   PUSH  HL
1361  DB19 2A FC 8F             LD    HL,(bios_vars.cursorY)
1362  DB1C E5                   PUSH  HL
1363  DB1D CD 59 DC             CALL  SUB56
1364  DB20 21 F9 67             LD    HL,67F9H    ; 26617
1365  DB23 22 FC 8F             LD    (bios_vars.cursorY),HL
1366  DB26 2A 61 D0             LD    HL,(VAR8)
1367  DB29 06 20                LD    B,20H         ; 32 ' '
1368  DB2B 11 18 FC             LD    DE,0FC18H   ; 64536
1369  DB2E CD 57 DB             CALL  SUB51
1370  DB31 11 E8 03             LD    DE,03E8H    ; 1000
1371  DB34 19                   ADD   HL,DE
1372  DB35 11 9C FF             LD    DE,0FF9CH   ; 65436
1373  DB38 CD 57 DB             CALL  SUB51
1374  DB3B 11 64 00             LD    DE,0064H    ; 100
1375  DB3E 19                   ADD   HL,DE
1376  DB3F 11 F6 FF             LD    DE,0FFF6H   ; 65526
1377  DB42 CD 57 DB             CALL  SUB51
1378  DB45 7D                   LD    A,L
1379  DB46 C6 3A                ADD   A,3AH         ; 58 ':'
1380  DB48 4F                   LD    C,A
1381  DB49 CD 09 C8             CALL  bios_printChar
1382  DB4C CD 62 DC             CALL  SUB57
1383  DB4F E1                   POP   HL
1384  DB50 22 FC 8F             LD    (bios_vars.cursorY),HL
1385  DB53 E1                   POP   HL
1386  DB54 C1                   POP   BC
1387  DB55 D1                   POP   DE
1388  DB56 C9                   RET
1389  DB57 0E 2F        SUB51:  LD    C,2FH         ; 47 '/'; [4]
1390  DB59 0C           LBL112: INC   C
1391  DB5A 19                   ADD   HL,DE
1392  DB5B DA 59 DB             JP    C,LBL112
1393  DB5E 79                   LD    A,C
1394  DB5F FE 30                CP    30H           ; 48 '0'
1395  DB61 CA 66 DB             JP    Z,LBL113
1396  DB64 06 FF                LD    B,0FFH                ; 255
1397  DB66 A0           LBL113: AND   B
1398  DB67 4F                   LD    C,A
1399  DB68 C3 09 C8             JP    bios_printChar
1400  DB6B 2A 59 D0     SUB52:  LD    HL,(VAR3)   ; [3]
1401  DB6E EB                   EX    DE,HL
1402  DB6F 2A 06 D0             LD    HL,(0D006H)
1403  DB72 22 59 D0             LD    (VAR3),HL
1404  DB75 21 01 00             LD    HL,0001H    ; 1
1405  DB78 22 61 D0             LD    (VAR8),HL
1406  DB7B 2A 59 D0     LBL114: LD    HL,(VAR3)
1407  DB7E CD FA D9             CALL  SUB38
1408  DB81 C8                   RET   Z
1409  DB82 CD EE DA             CALL  SUB48
1410  DB85 C3 7B DB             JP    LBL114
1411  DB88 E5           SUB53:  PUSH  HL            ; [2]
1412  DB89 2A FC 8F             LD    HL,(bios_vars.cursorY)
1413  DB8C E5                   PUSH  HL
1414  DB8D CD 59 DC             CALL  SUB56
1415  DB90 26 90                LD    H,90H         ; 144
1416  DB92 0E 30                LD    C,30H         ; 48 '0'
1417  DB94 2E F1        LBL115: LD    L,0F1H                ; 241
1418  DB96 3E 09                LD    A,09H         ; 9
1419  DB98 36 FF        LBL116: LD    (HL),0FFH   ; 255
1420  DB9A 2C                   INC   L
1421  DB9B 3D                   DEC   A
1422  DB9C C2 98 DB             JP    NZ,LBL116
1423  DB9F 24                   INC   H
1424  DBA0 0D                   DEC   C
1425  DBA1 C2 94 DB             JP    NZ,LBL115
1426  DBA4 21 F9 58             LD    HL,58F9H    ; 22777
1427  DBA7 22 FC 8F             LD    (bios_vars.cursorY),HL
1428  DBAA 21 C8 D0             LD    HL,REF18    ; 53448
1429  DBAD CD 18 C8             CALL  bios_printString
1430  DBB0 21 F9 80             LD    HL,80F9H    ; 33017
1431  DBB3 22 FC 8F             LD    (bios_vars.cursorY),HL
1432  DBB6 21 CD D0             LD    HL,REF19    ; 53453
1433  DBB9 CD 18 C8             CALL  bios_printString
1434  DBBC CD 16 DB             CALL  SUB50
1435  DBBF CD C7 DA             CALL  SUB47
1436  DBC2 CD 62 DC             CALL  SUB57
1437  DBC5 E1                   POP   HL
1438  DBC6 22 FC 8F             LD    (bios_vars.cursorY),HL
1439  DBC9 E1                   POP   HL
1440  DBCA C9                   RET
1441  DBCB E1           SUB54:  POP   HL            ; [3]
1442  DBCC 31 50 8F     SMC4:   LD    SP,8F50H    ; 36688
1443  DBCF E9                   JP    (HL)
1444  DBD0 CD 51 D3     LBL117: CALL  SUB12
1445  DBD3 CD D5 D3             CALL  SUB13
1446  DBD6 11 48 D0             LD    DE,REF4             ; 53320
1447  DBD9 0E 18                LD    C,18H         ; 24
1448  DBDB CD FA D9     LBL118: CALL  SUB38
1449  DBDE C8                   RET   Z
1450  DBDF 7E                   LD    A,(HL)
1451  DBE0 FE 20                CP    20H           ; 32 ' '
1452  DBE2 CA EC DB             JP    Z,LBL119
1453  DBE5 23                   INC   HL
1454  DBE6 CD 09 C8             CALL  bios_printChar
1455  DBE9 C3 DB DB             JP    LBL118
1456  DBEC CD FA D9     LBL119: CALL  SUB38         ; [2]
1457  DBEF CA FE D2             JP    Z,LBL22
1458  DBF2 7E                   LD    A,(HL)
1459  DBF3 FE 20                CP    20H           ; 32 ' '
1460  DBF5 C0                   RET   NZ
1461  DBF6 23                   INC   HL
1462  DBF7 CD 09 C8             CALL  bios_printChar
1463  DBFA C3 EC DB             JP    LBL119
1464  DBFD CD 51 D3     LBL120: CALL  SUB12
1465  DC00 CD D5 D3             CALL  SUB13
1466  DC03 11 0A D0             LD    DE,LBL2             ; 53258
1467  DC06 0E 08                LD    C,08H         ; 8
1468  DC08 CD FA D9             CALL  SUB38
1469  DC0B C8                   RET   Z
1470  DC0C 2B                   DEC   HL
1471  DC0D 1B                   DEC   DE
1472  DC0E CD FA D9     LBL121: CALL  SUB38
1473  DC11 C8                   RET   Z
1474  DC12 7E                   LD    A,(HL)
1475  DC13 FE 20                CP    20H           ; 32 ' '
1476  DC15 C2 1F DC             JP    NZ,LBL122
1477  DC18 CD 09 C8             CALL  bios_printChar
1478  DC1B 2B                   DEC   HL
1479  DC1C C3 0E DC             JP    LBL121
1480  DC1F CD FA D9     LBL122: CALL  SUB38         ; [2]
1481  DC22 C8                   RET   Z
1482  DC23 7E                   LD    A,(HL)
1483  DC24 FE 20                CP    20H           ; 32 ' '
1484  DC26 C8                   RET   Z
1485  DC27 2B                   DEC   HL
1486  DC28 CD 09 C8             CALL  bios_printChar
1487  DC2B C3 1F DC             JP    LBL122
1488  DC2E E5           SUB55:  PUSH  HL
1489  DC2F D5                   PUSH  DE
1490  DC30 21 00 00             LD    HL,0000H
1491  DC33 39                   ADD   HL,SP
1492  DC34 22 54 DC             LD    (SMC5+1),HL
1493  DC37 11 00 00             LD    DE,0000H
1494  DC3A 21 F0 BF             LD    HL,0BFF0H   ; 49136
1495  DC3D 0E 30                LD    C,30H         ; 48 '0'
1496  DC3F F9           LBL123: LD    SP,HL
1497  DC40 3E 0F                LD    A,0FH         ; 15
1498  DC42 D5           LBL124: PUSH  DE
1499  DC43 D5                   PUSH  DE
1500  DC44 D5                   PUSH  DE
1501  DC45 D5                   PUSH  DE
1502  DC46 D5                   PUSH  DE
1503  DC47 D5                   PUSH  DE
1504  DC48 D5                   PUSH  DE
1505  DC49 D5                   PUSH  DE
1506  DC4A 3D                   DEC   A
1507  DC4B C2 42 DC             JP    NZ,LBL124
1508  DC4E 25                   DEC   H
1509  DC4F 0D                   DEC   C
1510  DC50 C2 3F DC             JP    NZ,LBL123
1511  DC53 31 FF FF     SMC5:   LD    SP,0FFFFH   ; 65535
1512  DC56 D1                   POP   DE
1513  DC57 E1                   POP   HL
1514  DC58 C9                   RET
1515  DC59 E5           SUB56:  PUSH  HL            ; [5]
1516  DC5A 21 FF FF             LD    HL,0FFFFH   ; 65535
1517  DC5D 22 FA 8F     LBL125: LD    (bios_vars.inverse),HL
1518  DC60 E1                   POP   HL
1519  DC61 C9                   RET
1520  DC62 E5           SUB57:  PUSH  HL            ; [6]
1521  DC63 21 00 00             LD    HL,0000H
1522  DC66 C3 5D DC             JP    LBL125
1523  DC69 CD 1F DE     SUB58:  CALL  SUB63         ; [3]
1524  DC6C 11 0A DF             LD    DE,0DF0AH   ; 57098
1525  DC6F 01 C3 DD             LD    BC,REF25    ; 56771
1526  DC72 CD 2D C4             CALL  bios_memcpy_bc_hl
1527  DC75 21 F9 00             LD    HL,00F9H    ; 249
1528  DC78 22 FC 8F             LD    (bios_vars.cursorY),HL
1529  DC7B 21 FF FF             LD    HL,0FFFFH   ; 65535
1530  DC7E 22 FA 8F             LD    (bios_vars.inverse),HL
1531  DC81 21 BE DD             LD    HL,REF24    ; 56766
1532  DC84 CD 18 C8             CALL  bios_printString
1533  DC87 CD 03 C8             CALL  bios_getch
1534  DC8A 21 F9 0F             LD    HL,0FF9H    ; 4089
1535  DC8D 22 FC 8F             LD    (bios_vars.cursorY),HL
1536  DC90 FE 0D                CP    0DH           ; 13
1537  DC92 CA AF DC             JP    Z,LBL126
1538  DC95 F5                   PUSH  AF
1539  DC96 21 E0 DD             LD    HL,REF28    ; 56800
1540  DC99 CD 18 C8             CALL  bios_printString
1541  DC9C 21 F9 0F             LD    HL,0FF9H    ; 4089
1542  DC9F 22 FC 8F             LD    (bios_vars.cursorY),HL
1543  DCA2 21 C3 DD             LD    HL,REF25    ; 56771
1544  DCA5 01 C3 DD             LD    BC,REF25    ; 56771
1545  DCA8 11 CD DD             LD    DE,REF26    ; 56781
1546  DCAB F1                   POP   AF
1547  DCAC C3 1A DD             JP    LBL131
1548  DCAF 21 C3 DD     LBL126: LD    HL,REF25    ; 56771; [6]
1549  DCB2 11 CD DD             LD    DE,REF26    ; 56781
1550  DCB5 01 00 DF             LD    BC,0DF00H   ; 57088
1551  DCB8 CD 2D C4             CALL  bios_memcpy_bc_hl
1552  DCBB 21 00 00             LD    HL,0000H
1553  DCBE 22 FA 8F             LD    (bios_vars.inverse),HL
1554  DCC1 C9                   RET
1555  DCC2 CD D5 DC     SUB59:  CALL  SUB60
1556  DCC5 2A 06 D0             LD    HL,(0D006H)
1557  DCC8 EB                   EX    DE,HL
1558  DCC9 21 D0 DD             LD    HL,REF27    ; 56784
1559  DCCC CD 66 C8             CALL  bios_fileLoad2
1560  DCCF DA 65 DD             JP    C,LBL135
1561  DCD2 C3 AF DC             JP    LBL126
1562  DCD5 21 C3 DD     SUB60:  LD    HL,REF25    ; 56771; [3]
1563  DCD8 11 D0 DD             LD    DE,REF27    ; 56784
1564  DCDB CD 5A C8             CALL  bios_fileNamePrepare
1565  DCDE C9                   RET
1566  DCDF CD D5 DC     SUB61:  CALL  SUB60
1567  DCE2 11 00 00             LD    DE,0000H
1568  DCE5 06 00                LD    B,00H
1569  DCE7 2A 06 D0             LD    HL,(0D006H)
1570  DCEA 78           LBL127: LD    A,B
1571  DCEB 86                   ADD   A,(HL)
1572  DCEC 47                   LD    B,A
1573  DCED 13                   INC   DE
1574  DCEE 7E                   LD    A,(HL)
1575  DCEF 3C                   INC   A
1576  DCF0 CA F7 DC             JP    Z,LBL128
1577  DCF3 23                   INC   HL
1578  DCF4 C3 EA DC             JP    LBL127
1579  DCF7 2A 06 D0     LBL128: LD    HL,(0D006H)
1580  DCFA 22 DA DD             LD    (VAR10),HL
1581  DCFD EB                   EX    DE,HL
1582  DCFE 22 DC DD             LD    (VAR11),HL
1583  DD01 78                   LD    A,B
1584  DD02 32 DE DD             LD    (VAR12),A
1585  DD05 21 D0 DD             LD    HL,REF27    ; 56784
1586  DD08 CD 45 C8             CALL  bios_fileCreate
1587  DD0B DA 65 DD             JP    C,LBL135
1588  DD0E C3 AF DC             JP    LBL126
1589  DD11 F1           LBL129: POP   AF
1590  DD12 C3 09 D2             JP    SUB1
1591  DD15 44                   LD    B,H
1592  DD16 4D                   LD    C,L
1593  DD17 CD 03 C8     LBL130: CALL  bios_getch          ; [4]
1594  DD1A FE 08        LBL131: CP    08H           ; 8
1595  DD1C CA 41 DD             JP    Z,LBL132
1596  DD1F FE 0D                CP    0DH           ; 13
1597  DD21 CA 60 DD             JP    Z,LBL134
1598  DD24 FE 1F                CP    1FH           ; 31
1599  DD26 CA B4 DD             JP    Z,LBL140
1600  DD29 FE 20                CP    20H           ; 32 ' '
1601  DD2B DA 17 DD             JP    C,LBL130
1602  DD2E F5                   PUSH  AF
1603  DD2F CD 27 C4             CALL  bios_cmp_hl_de
1604  DD32 CA 11 DD             JP    Z,LBL129
1605  DD35 F1                   POP   AF
1606  DD36 77                   LD    (HL),A
1607  DD37 C5                   PUSH  BC
1608  DD38 4F                   LD    C,A
1609  DD39 CD 09 C8             CALL  bios_printChar
1610  DD3C C1                   POP   BC
1611  DD3D 23                   INC   HL
1612  DD3E C3 17 DD             JP    LBL130
1613  DD41 7C           LBL132: LD    A,H
1614  DD42 B8                   CP    B
1615  DD43 C2 4B DD             JP    NZ,LBL133
1616  DD46 7D                   LD    A,L
1617  DD47 B9                   CP    C
1618  DD48 CA 17 DD             JP    Z,LBL130
1619  DD4B 2B           LBL133: DEC   HL
1620  DD4C C5                   PUSH  BC
1621  DD4D 0E 08                LD    C,08H         ; 8
1622  DD4F CD 09 C8             CALL  bios_printChar
1623  DD52 0E 20                LD    C,20H         ; 32 ' '
1624  DD54 CD 09 C8             CALL  bios_printChar
1625  DD57 0E 08                LD    C,08H         ; 8
1626  DD59 CD 09 C8             CALL  bios_printChar
1627  DD5C C1                   POP   BC
1628  DD5D C3 17 DD             JP    LBL130
1629  DD60 36 00        LBL134: LD    (HL),00H
1630  DD62 C3 AF DC             JP    LBL126
1631  DD65 0E 05        LBL135:  LD    C,05H         ; 5; [5]
1632  DD67 CD 70 C1     LBL136: CALL  bios_beep_Old
1633  DD6A 06 FF                LD    B,0FFH                ; 255
1634  DD6C CD 90 C1             CALL  bios_delay_b
1635  DD6F CD 90 C1             CALL  bios_delay_b
1636  DD72 0D                   DEC   C
1637  DD73 C2 67 DD             JP    NZ,LBL136
1638  DD76 C3 AF DC             JP    LBL126
1639  DD79 CD D5 DC     SUB62:  CALL  SUB60
1640  DD7C 21 D0 DD             LD    HL,REF27    ; 56784
1641  DD7F CD 51 C8             CALL  bios_fileLoadInfo
1642  DD82 2A DC DD             LD    HL,(VAR11)
1643  DD85 EB                   EX    DE,HL
1644  DD86 D5                   PUSH  DE
1645  DD87 2A 06 D0             LD    HL,(0D006H)
1646  DD8A 7E           LBL137:  LD    A,(HL)
1647  DD8B 3C                   INC   A
1648  DD8C CA 93 DD             JP    Z,LBL138
1649  DD8F 23                   INC   HL
1650  DD90 C3 8A DD             JP    LBL137
1651  DD93 D1           LBL138:  POP   DE
1652  DD94 E5                   PUSH  HL
1653  DD95 19                   ADD   HL,DE
1654  DD96 EB                   EX    DE,HL
1655  DD97 2A 08 D0             LD    HL,(0D008H)
1656  DD9A 7C                   LD    A,H
1657  DD9B BA                   CP    D
1658  DD9C DA 65 DD             JP    C,LBL135
1659  DD9F C2 A7 DD             JP    NZ,LBL139
1660  DDA2 7D                   LD    A,L
1661  DDA3 BB                   CP    E
1662  DDA4 DA 65 DD             JP    C,LBL135
1663  DDA7 D1           LBL139: POP   DE
1664  DDA8 21 D0 DD             LD    HL,REF27    ; 56784
1665  DDAB CD 66 C8             CALL  bios_fileLoad2
1666  DDAE DA 65 DD             JP    C,LBL135
1667  DDB1 C3 AF DC             JP    LBL126
1668  DDB4 D1           LBL140: POP   DE
1669  DDB5 21 00 00             LD    HL,0000H
1670  DDB8 22 FA 8F             LD    (bios_vars.inverse),HL
1671  DDBB C3 17 D1             JP    LBL10
1672  DDBE 46 49 4C 45  REF24:  DB    46H,49H,4CH,45H           ; "FILE"
1673  DDC2 3A                   DB    3AH                   ; ":"
1674  DDC3 00 00 00 00  REF25:  DB    00H,00H,00H,00H           ; "...."
1675  DDC7 00 00 00 00          DB    00H,00H,00H,00H           ; "...."
1676  DDCB 00 00                DB    00H,00H                     ; ".."
1677  DDCD 00 00 00     REF26:  DB    00H,00H,00H         ; "..."
1678  DDD0 20 20 20 20  REF27:  DB    20H,20H,20H,20H           ; "    "
1679  DDD4 20 20 20 20          DB    20H,20H,20H,20H           ; "    "
1680  DDD8 20 20                DB    20H,20H                     ; "  "
1681  DDDA 20 20        VAR10:  DW    2020H
1682  DDDC 20 20        VAR11:  DW    2020H
1683  DDDE 20           VAR12:  DB    20H
1684  DDDF 20                   DB    20H                   ; " "
1685  DDE0 20 20 20 20  REF28:  DB    20H,20H,20H,20H           ; "    "
1686  DDE4 20 20 20 20          DB    20H,20H,20H,20H           ; "    "
1687  DDE8 20 20 20 20          DB    20H,20H,20H,20H           ; "    "
1688  DDEC 00                   DB    00H                   ; "."
1689  DDED              LBL141:
1690  DDED CD 03 C8             CALL  bios_getch
1691  DDF0 4F                   LD    C,A
1692  DDF1 FE 03                CP    03H           ; 3
1693  DDF3 CA 03 DE             JP    Z,LBL142
1694  DDF6 FE 04                CP    04H           ; 4
1695  DDF8 CA 0C DE             JP    Z,LBL143
1696  DDFB FE 05                CP    05H           ; 5
1697  DDFD CA 15 DE             JP    Z,LBL144
1698  DE00 C3 52 D1             JP    LBL11
1699  DE03              LBL142:
1700  DE03 CD 69 DC             CALL  SUB58
1701  DE06 CD C2 DC             CALL  SUB59
1702  DE09 C3 10 D0             JP    LBL3
1703  DE0C              LBL143:
1704  DE0C CD 69 DC             CALL  SUB58
1705  DE0F CD DF DC             CALL  SUB61
1706  DE12 C3 09 D2             JP    SUB1
1707  DE15              LBL144:
1708  DE15 CD 69 DC             CALL  SUB58
1709  DE18 CD 79 DD             CALL  SUB62
1710  DE1B C3 10 D0             JP    LBL3
1711  DE1E 00                   NOP
1712  DE1F              SUB63:
1713  DE1F CD 17 D4             CALL  SUB15
1714  DE22 21 00 DF             LD    HL,0DF00H   ; 57088
1715  DE25 C9                   RET
1716  DE26              LBL145:
1717  DE26 EB                   EX    DE,HL
1718  DE27 11 3C DE             LD    DE,REF29    ; 56892
1719  DE2A CD 5A C8             CALL  bios_fileNamePrepare
1720  DE2D 2A 06 D0             LD    HL,(0D006H)
1721  DE30 EB                   EX    DE,HL
1722  DE31 21 3C DE             LD    HL,REF29    ; 56892
1723  DE34 CD 66 C8             CALL  bios_fileLoad2
1724  DE37 C3 0A D0             JP    LBL2
1725  DE3A 00 00                DB    00H,00H                     ; ".."
1726  DE3C 00 00 00 00  REF29:  DB    00H,00H,00H,00H           ; "...."
1727  DE40
# file closed: D:\Projects\Specialist\MySoft\MXOS-Z80\E\E.asm
